/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={16655:(t,e,r)=>{"use strict";r.d(e,{OA:()=>i,WL:()=>o,u$:()=>n});const i={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},n=t=>(...e)=>({_$litDirective$:t,values:e});class o{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,r){this._$Ct=t,this._$AM=e,this._$Ci=r}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}},16886:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var i=r(36758),n=r.n(i),o=r(40935),s=r.n(o)()(n());s.push([t.id,'html,body{background-color:#ffffff;background-color:var(--wh-reader-bg-color, #ffffff);transition:color .3s ease,background-color .3s ease}#reader{width:700px;width:var(--wh-reader-layout-width, 700px);max-width:100vw;min-width:300px;font-size:18px;font-size:var(--wh-reader-font-size, 18px);box-sizing:border-box;min-height:100vh;margin:0 auto;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;line-height:1.6;line-height:var(--wh-reader-line-height, 1.6);padding:1.5rem 1.25rem;background-color:#ffffff;background-color:var(--wh-reader-bg-color, #ffffff);color:#333333;color:var(--wh-reader-color, #333333);transition:color .3s ease,background-color .3s ease}@media screen and (max-width: 768px){#reader{max-width:100vw}}#reader h1,#reader h2,#reader h3,#reader h4,#reader h5,#reader h6{font-weight:bold;line-height:1.3;margin:1.5em 0 .75em}#reader h1{font-size:1.6em}#reader h2{font-size:1.2em}#reader h3{font-size:1.1em}@media(min-width: 768px){#reader h1{font-size:1.7em}#reader h2{font-size:1.4em}#reader h3{font-size:1.2em}}#reader p{margin:0 0 1.5em}#reader img{max-width:100%;height:auto;margin:1em 0}#reader figure{margin:1.5em 0}#reader figure figcaption{font-size:.9em;color:#666666;color:var(--wh-reader-figcaption-color, #666666);margin-top:.5em}#reader blockquote{margin:1.5em 0;padding:0 1em;border-left:3px solid #dddddd;border-left:3px solid var(--wh-reader-blockquote-border-color, #dddddd);color:#666666;color:var(--wh-reader-blockquote-color, #666666)}#reader pre,#reader code{font-family:Consolas,Monaco,"Andale Mono",monospace;font-size:.9em;background:#f5f5f5;background:var(--wh-reader-code-bg-color, #f5f5f5);padding:.2em .4em;border-radius:3px}#reader pre{padding:1em;overflow-x:auto;margin:1.5em 0}#reader a{color:#1a73e8;color:var(--wh-reader-link-color, #1a73e8);text-decoration:none}#reader a:hover{text-decoration:underline}#reader ul,#reader ol{margin:1.5em 0;padding-left:2em}#reader li{margin:.5em 0}#reader hr{border:none;border-top:1px solid #dddddd;border-top:1px solid var(--wh-reader-hr-color, #dddddd);margin:2em 0}#reader table{border-collapse:collapse;width:100%;margin:1.5em 0}#reader th,#reader td{padding:.5em;border:1px solid #dddddd;border:1px solid var(--wh-reader-table-border-color, #dddddd);text-align:left}#reader th{background:#f5f5f5;background:var(--wh-reader-table-header-bg-color, #f5f5f5);font-weight:bold}',""]);const a=s},28744:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var i=r(36758),n=r.n(i),o=r(40935),s=r.n(o)()(n());s.push([t.id,':host{font-family:var(--wh-font-family);box-sizing:border-box}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.primary-btn{box-shadow:5px 7px 6px -4px rgba(0,0,0,.1);padding:10px 20px;border:none;border-radius:4px;color:#fff;font-weight:400;font-family:var(--wh-font-family);cursor:pointer;background:var(--wh-primary-700);text-decoration:none}.primary-btn:disabled{background:var(--wh-bg-disabled);color:var(--wh-text-light);cursor:not-allowed;box-shadow:none}.primary-btn:not(:disabled):hover{background:var(--wh-primary-600)}.secondary-btn{box-shadow:5px 7px 6px -4px rgba(0,0,0,.1);padding:10px 20px;border:none;border-radius:4px;color:#fff;font-weight:400;font-family:var(--wh-font-family);cursor:pointer;background:var(--wh-gray-50);border:.5px solid rgba(47,50,55,.2392156863);background:var(--wh-gray-50);color:var(--wh-gray-600)}.secondary-btn:disabled{background:var(--wh-bg-disabled);color:var(--wh-text-light);cursor:not-allowed;box-shadow:none}.primary-text-btn{box-shadow:5px 7px 6px -4px rgba(0,0,0,.1);padding:10px 20px;border:none;border-radius:4px;color:#fff;font-weight:400;font-family:var(--wh-font-family);cursor:pointer;color:#fff;background:var(--secondary-dark);border:1px solid var(--wh-primary-600)}.primary-text-btn:disabled{background:var(--wh-bg-disabled);color:var(--wh-text-light);cursor:not-allowed;box-shadow:none}.chrome-btn{box-shadow:5px 7px 6px -4px rgba(0,0,0,.1);padding:10px 20px;border:none;border-radius:4px;color:#fff;font-weight:400;font-family:var(--wh-font-family);cursor:pointer;padding:0;background:var(--wh-primary-600);box-shadow:0px 2px 1px -1px rgba(var(--wh-primary-600), 0.6),0 1px 1px 0 rgba(var(--wh-primary-600), 0.341),0 1px 3px 0 rgba(var(--wh-primary-600), 0.322)}.chrome-btn:disabled{background:var(--wh-bg-disabled);color:var(--wh-text-light);cursor:not-allowed;box-shadow:none}.chrome-btn a{text-decoration:none;padding:10px 20px;line-height:40px;color:#fff}.chrome-btn:hover{background:var(--wh-primary-600);transition:all .2s ease;transform:scale(1.03)}.wh-loading-skeleton{color:rgba(0,0,0,0);opacity:.8;animation:1.25s linear 0s infinite normal none running loadingBlinking;background:var(--wh-skeleton-bg);border-radius:4px;position:relative;overflow:hidden}.wh-loading-skeleton::after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, var(--wh-skeleton-bg-hover), transparent);animation:skeleton-shimmer 2s infinite}@keyframes loadingBlinking{0%{background:var(--wh-skeleton-bg)}70%{background:var(--wh-skeleton-bg-hover)}100%{background:var(--wh-skeleton-bg-strong)}}@keyframes skeleton-shimmer{0%{left:-100%}100%{left:100%}}:host{width:100%}.overlay-button-container{position:absolute;bottom:0;left:0;background:linear-gradient(to top, var(--wh-bg-back-strong), transparent);height:120px;width:100%;display:flex;justify-content:center;align-items:center}@media(min-width: 768px){.overlay-button-container{height:160px}}.close-btn{position:absolute;top:16px;right:16px;background:var(--wh-bg-back-strong);border:none;border-radius:50%;width:28px;height:28px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--wh-text);opacity:.8;transition:opacity .2s ease}.close-btn:hover{opacity:1}.open-reader-btn{padding:12px 40px;border-radius:24px;font-size:16px;background:var(--wh-primary-600);display:flex;align-items:center;gap:6px}.open-reader-btn:hover{background:var(--wh-primary-500)}#reader{background:var(--wh-bg-base);color:var(--wh-text);margin:0;width:100%;min-height:0}@media(min-width: 600px){#reader::-webkit-scrollbar-track{background:var(--wh-bg-front-strong)}#reader::-webkit-scrollbar-thumb{background:var(--wh-border-front-strong);box-shadow:var(--wh-shadow);border-radius:10px}#reader::-webkit-scrollbar-thumb:hover{background:var(--wh-border-front-strong)}}.article-skeleton-container{display:flex;flex-direction:column;gap:16px;padding:20px 0}@media(max-width: 768px){.article-skeleton-container{gap:12px;padding:16px 0}}.empty-state-divider{width:80%;height:1px;background:var(--wh-border-base);margin:40px 0;border:none;margin:0 auto}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:auto;padding:32px 0 128px 0}.empty-state-content{display:flex;flex-direction:column;align-items:center;gap:4px;text-align:center;max-width:400px}.empty-state-content .empty-state-icon{color:var(--wh-text-strongest);fill:var(--wh-text-strongest);opacity:.7;transition:all .3s ease-in-out;filter:drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))}.empty-state-content h2{font-size:18px;margin:0;font-weight:500;color:var(--wh-text-light);line-height:1.4;letter-spacing:-0.01em;margin-bottom:4px;font-feature-settings:"liga" 1,"kern" 1}.empty-state-content p{font-size:14px;margin:0;line-height:1.5;color:var(--wh-text-lightest)}.empty-state-content a{color:var(--wh-text-lightest);text-decoration:underline}.empty-state-content a:hover{color:var(--wh-text-light)}',""]);const a=s},29843:(t,e,r)=>{var i=r(86718);i&&i.__esModule&&(i=i.default),t.exports="string"==typeof i?i:i.toString()},30827:(t,e,r)=>{"use strict";r.d(e,{y:()=>o});var i=r(38085),n=r(93811);class o extends n.LitElement{constructor(){super(...arguments),this.components=[],this.subscriptions=[]}connectedCallback(){super.connectedCallback(),(0,i.lazyDefine)(this.components)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe()}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()})}static define(t,e,r){(0,i.defineWebHighlightsElement)(t,e,r)}}},32267:(t,e,r)=>{"use strict";r.d(e,{e:()=>c});var i=r(93811),n=r(43715),o=r.n(n),s=r(29843),a=r.n(s);const l=new CSSStyleSheet;l.replaceSync(a()),l.replaceSync(o());const c=i.html`<style>
  ${a()}
  ${o()}
</style>`},33331:(t,e,r)=>{"use strict";r.d(e,{B:()=>a});var i=r(38085),n=r(97519),o=r(93811),s=r(38163);const a=(t,{disableStickyPlayer:e}={disableStickyPlayer:!1})=>{var r,a;if(!t)return o.html``;if((0,i.isYoutubeUrl)(t.url)&&(null===(r=t.youtubeTranscript)||void 0===r?void 0:r.transcriptMarkers.length)){const r={pageContent:t},n=(0,i.isWebAppUrl)(location.href)||(0,i.isReaderPage)();return o.html`${n?o.html`<webhighlights-youtube-player
            .youtubeUrl=${t.url}
            .disableStickyPlayer=${e}
          ></webhighlights-youtube-player>`:o.html``}<webhighlights-youtube-transcript
        .props=${r}
      ></webhighlights-youtube-transcript>`}return o.html`${(0,s._)(n.A.sanitize(null!==(a=t.content)&&void 0!==a?a:""))}`}},36758:t=>{"use strict";t.exports=function(t){return t[1]}},36774:(t,e,r)=>{"use strict";r.d(e,{YZ:()=>i.YZ,e1:()=>i.e1});var i=r(57929)},38085:t=>{"use strict";t.exports=WebHighlightsSharedLibExternal},38163:(t,e,r)=>{"use strict";r.d(e,{_:()=>i._});var i=r(41329)},40429:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var i=r(36758),n=r.n(i),o=r(40935),s=r.n(o)()(n());s.push([t.id,"#youtube-player-container{display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center;background:var(--wh-bg-back);background:var(--wh-reader-bg-color, var(--wh-bg-back));border-radius:8px}#youtube-player-container.sticky{position:sticky;top:0;z-index:1}#youtube-player{border-radius:8px}#youtube-player.hidden{display:none}",""]);const a=s},40935:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r="",i=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),i&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),i&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r}).join("")},e.i=function(t,r,i,n,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<t.length;c++){var d=[].concat(t[c]);i&&s[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),r&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=r):d[2]=r),n&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=n):d[4]="".concat(n)),e.push(d))}},e}},41329:(t,e,r)=>{"use strict";r.d(e,{_:()=>s});var i=r(80181),n=r(16655);class o extends n.WL{constructor(t){if(super(t),this.it=i.s6,t.type!==n.OA.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===i.s6||null==t)return this._t=void 0,this.it=t;if(t===i.c0)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}}o.directiveName="unsafeHTML",o.resultType=1;const s=(0,n.u$)(o)},43715:(t,e,r)=>{var i=r(16886);i&&i.__esModule&&(i=i.default),t.exports="string"==typeof i?i:i.toString()},45868:(t,e,r)=>{var i=r(40429);i&&i.__esModule&&(i=i.default),t.exports="string"==typeof i?i:i.toString()},55367:(t,e,r)=>{var i=r(28744);i&&i.__esModule&&(i=i.default),t.exports="string"==typeof i?i:i.toString()},57929:(t,e,r)=>{"use strict";r.d(e,{YZ:()=>s,e1:()=>n});var i=r(58207);const n={INITIAL:0,PENDING:1,COMPLETE:2,ERROR:3},o=Symbol();class s{get taskComplete(){return this.t||(1===this.i?this.t=new Promise((t,e)=>{this.o=t,this.h=e}):3===this.i?this.t=Promise.reject(this.l):this.t=Promise.resolve(this.u)),this.t}constructor(t,e,r){this.p=0,this.i=0,(this._=t).addController(this);const i="object"==typeof e?e:{task:e,args:r};this.v=i.task,this.j=i.args,this.m=i.argsEqual??a,this.k=i.onComplete,this.A=i.onError,this.autoRun=i.autoRun??!0,"initialValue"in i&&(this.u=i.initialValue,this.i=2,this.O=this.T?.())}hostUpdate(){!0===this.autoRun&&this.S()}hostUpdated(){"afterUpdate"===this.autoRun&&this.S()}T(){if(void 0===this.j)return;const t=this.j();if(!Array.isArray(t))throw Error("The args function must return an array");return t}async S(){const t=this.T(),e=this.O;this.O=t,t===e||void 0===t||void 0!==e&&this.m(e,t)||await this.run(t)}async run(t){let e,r;t??=this.T(),this.O=t,1===this.i?this.q?.abort():(this.t=void 0,this.o=void 0,this.h=void 0),this.i=1,"afterUpdate"===this.autoRun?queueMicrotask(()=>this._.requestUpdate()):this._.requestUpdate();const i=++this.p;this.q=new AbortController;let n=!1;try{e=await this.v(t,{signal:this.q.signal})}catch(t){n=!0,r=t}if(this.p===i){if(e===o)this.i=0;else{if(!1===n){try{this.k?.(e)}catch{}this.i=2,this.o?.(e)}else{try{this.A?.(r)}catch{}this.i=3,this.h?.(r)}this.u=e,this.l=r}this._.requestUpdate()}}abort(t){1===this.i&&this.q?.abort(t)}get value(){return this.u}get error(){return this.l}get status(){return this.i}render(t){switch(this.i){case 0:return t.initial?.();case 1:return t.pending?.();case 2:return t.complete?.(this.value);case 3:return t.error?.(this.error);default:throw Error("Unexpected status: "+this.i)}}}const a=(t,e)=>t===e||t.length===e.length&&t.every((t,r)=>!(0,i.Ec)(t,e[r]))},58207:(t,e,r)=>{"use strict";r.d(e,{Ec:()=>g});var i=r(86663);const{is:n,defineProperty:o,getOwnPropertyDescriptor:s,getOwnPropertyNames:a,getOwnPropertySymbols:l,getPrototypeOf:c}=Object,d=globalThis,h=d.trustedTypes,u=h?h.emptyScript:"",p=d.reactiveElementPolyfillSupport,m=(t,e)=>t,f={toAttribute(t,e){switch(e){case Boolean:t=t?u:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=null!==t;break;case Number:r=null===t?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch(t){r=null}}return r}},g=(t,e)=>!n(t,e),y={attribute:!0,type:String,converter:f,reflect:!1,useDefault:!1,hasChanged:g};Symbol.metadata??=Symbol("metadata"),d.litPropertyMetadata??=new WeakMap;class b extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=y){if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(t,e),!e.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(t,r,e);void 0!==i&&o(this.prototype,t,i)}}static getPropertyDescriptor(t,e,r){const{get:i,set:n}=s(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get:i,set(e){const o=i?.call(this);n?.call(this,e),this.requestUpdate(t,o,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??y}static _$Ei(){if(this.hasOwnProperty(m("elementProperties")))return;const t=c(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(m("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(m("properties"))){const t=this.properties,e=[...a(t),...l(t)];for(const r of e)this.createProperty(r,t[r])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,r]of e)this.elementProperties.set(t,r)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const r=this._$Eu(t,e);void 0!==r&&this._$Eh.set(r,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const t of r)e.unshift((0,i.sk)(t))}else void 0!==t&&e.push((0,i.sk)(t));return e}static _$Eu(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const r of e.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return(0,i.Rf)(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,e,r){this._$AK(t,r)}_$ET(t,e){const r=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,r);if(void 0!==i&&!0===r.reflect){const n=(void 0!==r.converter?.toAttribute?r.converter:f).toAttribute(e,r.type);this._$Em=t,null==n?this.removeAttribute(i):this.setAttribute(i,n),this._$Em=null}}_$AK(t,e){const r=this.constructor,i=r._$Eh.get(t);if(void 0!==i&&this._$Em!==i){const t=r.getPropertyOptions(i),n="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:f;this._$Em=i;const o=n.fromAttribute(e,t.type);this[i]=o??this._$Ej?.get(i)??o,this._$Em=null}}requestUpdate(t,e,r){if(void 0!==t){const i=this.constructor,n=this[t];if(r??=i.getPropertyOptions(t),!((r.hasChanged??g)(n,e)||r.useDefault&&r.reflect&&n===this._$Ej?.get(t)&&!this.hasAttribute(i._$Eu(t,r))))return;this.C(t,e,r)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,e,{useDefault:r,reflect:i,wrapped:n},o){r&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,o??e??this[t]),!0!==n||void 0!==o)||(this._$AL.has(t)||(this.hasUpdated||r||(e=void 0),this._$AL.set(t,e)),!0===i&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,r]of t){const{wrapped:t}=r,i=this[e];!0!==t||this._$AL.has(e)||void 0===i||this.C(e,void 0,r,i)}}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(e)):this._$EM()}catch(e){throw t=!1,this._$EM(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}}b.elementStyles=[],b.shadowRootOptions={mode:"open"},b[m("elementProperties")]=new Map,b[m("finalized")]=new Map,p?.({ReactiveElement:b}),(d.reactiveElementVersions??=[]).push("2.1.1")},59859:(t,e,r)=>{"use strict";var i=r(38085),n=r(93811),o=r(95665),s=r(30827),a=r(45868),l=r.n(a),c=function(t,e,r,i){var n,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,r,s):n(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},d=function(t,e,r,i){return new(r||(r=Promise))(function(n,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(s,a)}l((i=i.apply(t,e||[])).next())})};i.SHARED_COMPONENTS_INTERNAL.YoutubePlayer;const h="webhighlights-youtube-player";(new CSSStyleSheet).replaceSync(l());const u="youtube-player";class p extends s.y{constructor(){super(...arguments),this.components=[i.SHARED_COMPONENTS.Skeleton.TAG],this.youtubeUrl="",this.disableStickyPlayer=!1,this.currentTime=0,this.progress=0,this.isPlayerReady=!1,this.youtubeOptions=i.fallbackYoutubeOptions,this.intervalId=null,this.bridgeListener=t=>{const e=t.data;if(!e||"yt:event"!==e.type)return;const r=e;if("ready"===r.name)return this.isPlayerReady=!0,void i.notifications.dispatch("youtubePlayerStateChanged",{detail:{playerState:"unstarted",playerHeight:r.payload.playerHeight||0}});if("state"===r.name){const t=r.payload.playerState,e=r.payload.playerHeight||0;return void i.notifications.dispatch("youtubePlayerStateChanged",{detail:{playerState:t,playerHeight:e}})}return"time"===r.name?(this.currentTime="number"==typeof r.payload.currentTime?r.payload.currentTime:this.currentTime,this.progress="number"==typeof r.payload.progress?r.payload.progress:this.progress,void i.notifications.dispatch("youtubePlayerTimeChanged",{detail:{currentTime:this.currentTime,progress:this.progress}})):void 0}}createRenderRoot(){return this}firstUpdated(){return d(this,void 0,void 0,function*(){this.loadData(),this.initBridge(),this.startListeners()})}loadData(){return d(this,void 0,void 0,function*(){var t;const e=yield(0,i.useContext)().db.getChromeSettings();this.youtubeOptions=null!==(t=e.youtubeOptions)&&void 0!==t?t:i.fallbackYoutubeOptions})}get bridgeOrigin(){return(0,i.useContext)().environment.production?(0,i.useContext)().environment.WEBSITE_URL:(0,i.useContext)().environment.FRONTEND_URL}get bridgeBaseUrl(){return`${this.bridgeOrigin}/yt-embed.html`}startListeners(){this.subscriptions=[i.notifications.subscribe("youtubePlayerAction",this.onYoutubePlayerAction.bind(this)),i.notifications.subscribe("updatedChromeSettings",this.onUpdateChromeSettings.bind(this))]}onUpdateChromeSettings(t){var e;this.youtubeOptions=null!==(e=t.detail.youtubeOptions)&&void 0!==e?e:i.fallbackYoutubeOptions}updated(t){if(t.has("youtubeUrl")&&this.youtubeUrl){this.isPlayerReady=!1;const t=(0,i.getYoutubeVideoId)(this.youtubeUrl);this.updateBridgeSrc(null!=t?t:"")}}disconnectedCallback(){this.clearInterval(),super.disconnectedCallback()}onYoutubePlayerAction(t){"pause"!==t.detail.type?"play"!==t.detail.type?this.postBridgeCommand({type:"yt:cmd",name:"pause"}):"number"==typeof t.detail.timeToPlayAt?this.postBridgeCommand({type:"yt:cmd",name:"play",payload:{timeToPlayAt:t.detail.timeToPlayAt}}):this.postBridgeCommand({type:"yt:cmd",name:"play"}):this.postBridgeCommand({type:"yt:cmd",name:"pause"})}clearInterval(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}render(){const t=(0,i.isMobile)(),e=(0,i.getYoutubeVideoId)(this.youtubeUrl)||"",r=`${this.bridgeBaseUrl}?videoId=${encodeURIComponent(e)}&autoplay=0&mute=0&start=0`;return n.html`
      <style>
        ${h} {
          position: relative;
        }
        ${l()}
      </style>
      <div
        id="youtube-player-container"
        class="${this.youtubeOptions.enableStickyPlayer&&!this.disableStickyPlayer?"sticky":""}"
      >
        ${this.isPlayerReady?n.html``:n.html`
              <webhighlights-skeleton
                class="youtube-skeleton"
                style="width: ${t?"100vw":"100%"}; height: 315px; max-width: 100vw;"
              ></webhighlights-skeleton>
            `}
        <iframe
          id="${u}"
          src="${r}"
          class="${this.isPlayerReady?"":"hidden"}"
          referrerpolicy="strict-origin-when-cross-origin"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen
          style="width: 100%; height: 315px; border: 0;"
        ></iframe>
      </div>
    `}initBridge(){window.addEventListener("message",this.bridgeListener);const t=(0,i.getYoutubeVideoId)(this.youtubeUrl)||"";this.updateBridgeSrc(t)}updateBridgeSrc(t){const e=document.getElementById(u),r=`${this.bridgeBaseUrl}?videoId=${encodeURIComponent(t)}&autoplay=0&mute=0&start=0`;e&&e.src!==r&&(e.src=r)}postBridgeCommand(t){const e=document.getElementById(u);e&&e.contentWindow&&e.contentWindow.postMessage(t,this.bridgeOrigin)}}c([(0,o.property)({type:String})],p.prototype,"youtubeUrl",void 0),c([(0,o.property)()],p.prototype,"disableStickyPlayer",void 0),c([(0,o.state)()],p.prototype,"currentTime",void 0),c([(0,o.state)()],p.prototype,"progress",void 0),c([(0,o.state)()],p.prototype,"isPlayerReady",void 0),c([(0,o.state)()],p.prototype,"youtubeOptions",void 0),s.y.define(h,p)},71595:(t,e,r)=>{var i=r(78558);i&&i.__esModule&&(i=i.default),t.exports="string"==typeof i?i:i.toString()},78524:(t,e,r)=>{"use strict";var i=r(38085),n=r(97519),o=r(93811),s=r(95665),a=r(38163),l=r(30827),c=r(71595),d=r.n(c),h=function(t,e,r,i){var n,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,r,s):n(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};const u=i.SHARED_COMPONENTS_INTERNAL.YoutubeTranscript.TAG;(new CSSStyleSheet).replaceSync(d());const p="transcript-marker";class m extends l.y{constructor(){super(...arguments),this.components=[i.SHARED_COMPONENTS.Skeleton.TAG],this.currentVideoTimeInSeconds=0,this.currentYoutubePlayerState="unstarted",this.currentYoutubePlayerHeight=315,this.chromeSettings=i.fallbackChromeSettings}createRenderRoot(){return this}firstUpdated(){this.initListener(),this.loadData()}initListener(){this.subscriptions=[i.notifications.subscribe("youtubePlayerTimeChanged",this.onYoutubePlayerTimeChanged.bind(this)),i.notifications.subscribe("youtubePlayerStateChanged",this.onYoutubePlayerStateChanged.bind(this)),i.notifications.subscribe("updatedChromeSettings",this.onUpdateChromeSettings.bind(this))]}loadData(){return t=this,e=void 0,n=function*(){const t=yield(0,i.useContext)().db.getChromeSettings();this.chromeSettings=t},new((r=void 0)||(r=Promise))(function(i,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(s,a)}l((n=n.apply(t,e||[])).next())});var t,e,r,n}onUpdateChromeSettings(t){var e;this.chromeSettings=Object.assign(Object.assign({},this.chromeSettings),t.detail),(null===(e=this.chromeSettings.youtubeOptions)||void 0===e?void 0:e.enableAutoscrolling)&&this.scrollToActiveTranscriptText()}scrollToActiveTranscriptText(){const t=Array.from(this.getAllTranscriptTexts()).find(t=>t.classList.contains("active"));t&&this.scrollToTranscriptText(t)}getAllTranscriptTexts(){return this.querySelectorAll(`.${p}`)}onYoutubePlayerStateChanged(t){this.currentYoutubePlayerState=t.detail.playerState,this.currentYoutubePlayerHeight=t.detail.playerHeight}scrollToTranscriptText(t){var e;if(!(null===(e=this.chromeSettings.youtubeOptions)||void 0===e?void 0:e.enableAutoscrolling))return;const r=this.chromeSettings.youtubeOptions.enableStickyPlayer?50:100,i=this.chromeSettings.youtubeOptions.enableStickyPlayer?70:100,n=this.chromeSettings.youtubeOptions.enableStickyPlayer?this.currentYoutubePlayerHeight:0,o=n+r,s=window.innerHeight-i,a=window.scrollY,l=t.offsetTop+this.offsetTop-a;(l>s||l<o)&&window.scrollTo({top:t.offsetTop+this.offsetTop-n-r,behavior:"smooth"})}onYoutubePlayerTimeChanged(t){this.currentVideoTimeInSeconds=t.detail.currentTime,this.getAllTranscriptTexts().forEach(t=>{const e=Number(t.getAttribute("data-offset")),r=Number(t.getAttribute("data-duration")),i=e+r<=this.currentVideoTimeInSeconds,n=e<=this.currentVideoTimeInSeconds&&e+r>=this.currentVideoTimeInSeconds;t.classList.remove("active"),t.classList.remove("finished"),i&&t.classList.add("finished"),n&&(t.classList.add("active"),this.scrollToTranscriptText(t))})}get transcriptsWithText(){var t,e,r,i;if(!(null===(t=this.props.pageContent.youtubeTranscript)||void 0===t?void 0:t.transcriptMarkers.length))return[];let n=0;const o=[];for(const t of null!==(r=null===(e=this.props.pageContent.youtubeTranscript)||void 0===e?void 0:e.transcriptMarkers)&&void 0!==r?r:[])o.push(Object.assign(Object.assign({},t),{text:(null===(i=this.props.pageContent.content)||void 0===i?void 0:i.substring(n,n+t.textLength))||""})),n+=t.textLength+1;return o}onTimeMarkerClick(t){this.onPlayVideoFrom(t.offset)}onPlayVideoFrom(t){i.notifications.dispatch("youtubePlayerAction",{detail:{timeToPlayAt:t,type:"play"}})}render(){return this.transcriptsWithText.length?o.html`
      <style>
        ${d()}
      </style>
      <article class="youtube-transcript ${this.currentYoutubePlayerState}">
        ${this.transcriptsWithText.map((t,e)=>{const r=(0,i.secondsToTime)(t.offset);return o.html`<span
              class="time-marker"
              style="z-index: ${this.transcriptsWithText.length-e};"
              data-time="${r}"
              @click=${()=>this.onTimeMarkerClick(t)}
            ></span
            >${(0,a._)(n.A.sanitize(`<span class="${p}" data-offset="${t.offset}" data-duration="${t.duration}">${t.text} </span>`))}`})}
      </article>
    `:o.html``}}h([(0,s.property)({type:Object})],m.prototype,"props",void 0),h([(0,s.state)()],m.prototype,"currentVideoTimeInSeconds",void 0),h([(0,s.state)()],m.prototype,"currentYoutubePlayerState",void 0),h([(0,s.state)()],m.prototype,"currentYoutubePlayerHeight",void 0),h([(0,s.state)()],m.prototype,"chromeSettings",void 0),l.y.define(u,m)},78558:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var i=r(36758),n=r.n(i),o=r(40935),s=r.n(o)()(n());s.push([t.id,"web-highlight{padding:4px 0}.youtube-transcript{position:relative;padding-top:16px}.youtube-transcript .transcript-marker{color:var(--wh-reader-color);transition:opacity .2s ease-in-out}.youtube-transcript .transcript-marker.finished{background:var(--wh-reader-bg-color-hover);padding:4px 0}.youtube-transcript .transcript-marker.active{background:var(--wh-reader-bg-color-hover);padding:4px 0}.youtube-transcript.playing .transcript-marker{color:var(--wh-reader-color-light)}.youtube-transcript.playing .transcript-marker.finished{opacity:.7}.youtube-transcript.playing .transcript-marker.active{color:var(--wh-reader-color);background:var(--wh-reader-bg-color-hover-strong)}.youtube-transcript .time-marker{position:absolute;left:-50px;transform:translateY(6px);color:rgba(0,0,0,0);font-size:9px;background:rgba(0,0,0,0);padding:4px 8px;border-radius:4px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.youtube-transcript .time-marker::before{content:attr(data-time);position:absolute;top:0;left:0;color:var(--wh-reader-color-lighter);background:var(--wh-reader-bg-color);padding:4px 8px;border-radius:4px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.youtube-transcript .time-marker:hover::before{color:var(--wh-reader-color);background:var(--wh-reader-bg-color-hover)}",""]);const a=s},80181:(t,e,r)=>{"use strict";r.d(e,{c0:()=>S,s6:()=>A});const i=globalThis,n=i.trustedTypes,o=n?n.createPolicy("lit-html",{createHTML:t=>t}):void 0,s="$lit$",a=`lit$${Math.random().toFixed(9).slice(2)}$`,l="?"+a,c=`<${l}>`,d=document,h=()=>d.createComment(""),u=t=>null===t||"object"!=typeof t&&"function"!=typeof t,p=Array.isArray,m="[ \t\n\f\r]",f=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,g=/-->/g,y=/>/g,b=RegExp(`>|${m}(?:([^\\s"'>=/]+)(${m}*=${m}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),v=/'/g,_=/"/g,w=/^(?:script|style|textarea|title)$/i,x=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),S=(x(1),x(2),x(3),Symbol.for("lit-noChange")),A=Symbol.for("lit-nothing"),T=new WeakMap,E=d.createTreeWalker(d,129);function $(t,e){if(!p(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==o?o.createHTML(e):e}const C=(t,e)=>{const r=t.length-1,i=[];let n,o=2===e?"<svg>":3===e?"<math>":"",l=f;for(let e=0;e<r;e++){const r=t[e];let d,h,u=-1,p=0;for(;p<r.length&&(l.lastIndex=p,h=l.exec(r),null!==h);)p=l.lastIndex,l===f?"!--"===h[1]?l=g:void 0!==h[1]?l=y:void 0!==h[2]?(w.test(h[2])&&(n=RegExp("</"+h[2],"g")),l=b):void 0!==h[3]&&(l=b):l===b?">"===h[0]?(l=n??f,u=-1):void 0===h[1]?u=-2:(u=l.lastIndex-h[2].length,d=h[1],l=void 0===h[3]?b:'"'===h[3]?_:v):l===_||l===v?l=b:l===g||l===y?l=f:(l=b,n=void 0);const m=l===b&&t[e+1].startsWith("/>")?" ":"";o+=l===f?r+c:u>=0?(i.push(d),r.slice(0,u)+s+r.slice(u)+a+m):r+a+(-2===u?e:m)}return[$(t,o+(t[r]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),i]};class k{constructor({strings:t,_$litType$:e},r){let i;this.parts=[];let o=0,c=0;const d=t.length-1,u=this.parts,[p,m]=C(t,e);if(this.el=k.createElement(p,r),E.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(i=E.nextNode())&&u.length<d;){if(1===i.nodeType){if(i.hasAttributes())for(const t of i.getAttributeNames())if(t.endsWith(s)){const e=m[c++],r=i.getAttribute(t).split(a),n=/([.?@])?(.*)/.exec(e);u.push({type:1,index:o,name:n[2],strings:r,ctor:"."===n[1]?M:"?"===n[1]?L:"@"===n[1]?I:P}),i.removeAttribute(t)}else t.startsWith(a)&&(u.push({type:6,index:o}),i.removeAttribute(t));if(w.test(i.tagName)){const t=i.textContent.split(a),e=t.length-1;if(e>0){i.textContent=n?n.emptyScript:"";for(let r=0;r<e;r++)i.append(t[r],h()),E.nextNode(),u.push({type:2,index:++o});i.append(t[e],h())}}}else if(8===i.nodeType)if(i.data===l)u.push({type:2,index:o});else{let t=-1;for(;-1!==(t=i.data.indexOf(a,t+1));)u.push({type:7,index:o}),t+=a.length-1}o++}}static createElement(t,e){const r=d.createElement("template");return r.innerHTML=t,r}}function O(t,e,r=t,i){if(e===S)return e;let n=void 0!==i?r._$Co?.[i]:r._$Cl;const o=u(e)?void 0:e._$litDirective$;return n?.constructor!==o&&(n?._$AO?.(!1),void 0===o?n=void 0:(n=new o(t),n._$AT(t,r,i)),void 0!==i?(r._$Co??=[])[i]=n:r._$Cl=n),void 0!==n&&(e=O(t,n._$AS(t,e.values),n,i)),e}class N{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:r}=this._$AD,i=(t?.creationScope??d).importNode(e,!0);E.currentNode=i;let n=E.nextNode(),o=0,s=0,a=r[0];for(;void 0!==a;){if(o===a.index){let e;2===a.type?e=new R(n,n.nextSibling,this,t):1===a.type?e=new a.ctor(n,a.name,a.strings,this,t):6===a.type&&(e=new U(n,this,t)),this._$AV.push(e),a=r[++s]}o!==a?.index&&(n=E.nextNode(),o++)}return E.currentNode=d,i}p(t){let e=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}}class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,r,i){this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=O(this,t,e),u(t)?t===A||null==t||""===t?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==S&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>p(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==A&&u(this._$AH)?this._$AA.nextSibling.data=t:this.T(d.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:r}=t,i="number"==typeof r?this._$AC(t):(void 0===r.el&&(r.el=k.createElement($(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(e);else{const t=new N(i,this),r=t.u(this.options);t.p(e),this.T(r),this._$AH=t}}_$AC(t){let e=T.get(t.strings);return void 0===e&&T.set(t.strings,e=new k(t)),e}k(t){p(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,i=0;for(const n of t)i===e.length?e.push(r=new R(this.O(h()),this.O(h()),this,this.options)):r=e[i],r._$AI(n),i++;i<e.length&&(this._$AR(r&&r._$AB.nextSibling,i),e.length=i)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class P{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,r,i,n){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=n,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=A}_$AI(t,e=this,r,i){const n=this.strings;let o=!1;if(void 0===n)t=O(this,t,e,0),o=!u(t)||t!==this._$AH&&t!==S,o&&(this._$AH=t);else{const i=t;let s,a;for(t=n[0],s=0;s<n.length-1;s++)a=O(this,i[r+s],e,s),a===S&&(a=this._$AH[s]),o||=!u(a)||a!==this._$AH[s],a===A?t=A:t!==A&&(t+=(a??"")+n[s+1]),this._$AH[s]=a}o&&!i&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class M extends P{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}class L extends P{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==A)}}class I extends P{constructor(t,e,r,i,n){super(t,e,r,i,n),this.type=5}_$AI(t,e=this){if((t=O(this,t,e,0)??A)===S)return;const r=this._$AH,i=t===A&&r!==A||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,n=t!==A&&(r===A||i);i&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class U{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){O(this,t)}}const D=i.litHtmlPolyfillSupport;D?.(k,R),(i.litHtmlVersions??=[]).push("3.3.1")},86663:(t,e,r)=>{"use strict";r.d(e,{Rf:()=>l,sk:()=>c});const i=globalThis,n=i.ShadowRoot&&(void 0===i.ShadyCSS||i.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o=Symbol(),s=new WeakMap;class a{constructor(t,e,r){if(this._$cssResult$=!0,r!==o)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(n&&void 0===t){const r=void 0!==e&&1===e.length;r&&(t=s.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&s.set(e,t))}return t}toString(){return this.cssText}}const l=(t,e)=>{if(n)t.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const r of e){const e=document.createElement("style"),n=i.litNonce;void 0!==n&&e.setAttribute("nonce",n),e.textContent=r.cssText,t.appendChild(e)}},c=n?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const r of t.cssRules)e+=r.cssText;return(t=>new a("string"==typeof t?t:t+"",void 0,o))(e)})(t):t},86718:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var i=r(36758),n=r.n(i),o=r(40935),s=r.n(o)()(n());s.push([t.id,".reader-content{flex:1}",""]);const a=s},93811:t=>{"use strict";t.exports=LitExternal},95665:t=>{"use strict";t.exports=LitDecoratorsExternal},97519:(t,e,r)=>{"use strict";r.d(e,{A:()=>rt});const{entries:i,setPrototypeOf:n,isFrozen:o,getPrototypeOf:s,getOwnPropertyDescriptor:a}=Object;let{freeze:l,seal:c,create:d}=Object,{apply:h,construct:u}="undefined"!=typeof Reflect&&Reflect;l||(l=function(t){return t}),c||(c=function(t){return t}),h||(h=function(t,e,r){return t.apply(e,r)}),u||(u=function(t,e){return new t(...e)});const p=C(Array.prototype.forEach),m=C(Array.prototype.lastIndexOf),f=C(Array.prototype.pop),g=C(Array.prototype.push),y=C(Array.prototype.splice),b=C(String.prototype.toLowerCase),v=C(String.prototype.toString),_=C(String.prototype.match),w=C(String.prototype.replace),x=C(String.prototype.indexOf),S=C(String.prototype.trim),A=C(Object.prototype.hasOwnProperty),T=C(RegExp.prototype.test),E=($=TypeError,function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return u($,e)});var $;function C(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return h(t,e,i)}}function k(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;n&&n(t,null);let i=e.length;for(;i--;){let n=e[i];if("string"==typeof n){const t=r(n);t!==n&&(o(e)||(e[i]=t),n=t)}t[n]=!0}return t}function O(t){for(let e=0;e<t.length;e++)A(t,e)||(t[e]=null);return t}function N(t){const e=d(null);for(const[r,n]of i(t))A(t,r)&&(Array.isArray(n)?e[r]=O(n):n&&"object"==typeof n&&n.constructor===Object?e[r]=N(n):e[r]=n);return e}function R(t,e){for(;null!==t;){const r=a(t,e);if(r){if(r.get)return C(r.get);if("function"==typeof r.value)return C(r.value)}t=s(t)}return function(){return null}}const P=l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),M=l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=l(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U=l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),D=l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),H=l(["#text"]),z=l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),j=l(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),B=l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),W=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F=c(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Y=c(/<%[\w\W]*|[\w\W]*%>/gm),G=c(/\$\{[\w\W]*/gm),q=c(/^data-[\-\w.\u00B7-\uFFFF]+$/),V=c(/^aria-[\-\w]+$/),X=c(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),K=c(/^(?:\w+script|data):/i),Z=c(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J=c(/^html$/i),Q=c(/^[a-z][.\w]*(-[.\w]+)+$/i);var tt=Object.freeze({__proto__:null,ARIA_ATTR:V,ATTR_WHITESPACE:Z,CUSTOM_ELEMENT:Q,DATA_ATTR:q,DOCTYPE_NAME:J,ERB_EXPR:Y,IS_ALLOWED_URI:X,IS_SCRIPT_OR_DATA:K,MUSTACHE_EXPR:F,TMPLIT_EXPR:G});const et=function(){return"undefined"==typeof window?null:window};var rt=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();const r=e=>t(e);if(r.version="3.2.6",r.removed=[],!e||!e.document||9!==e.document.nodeType||!e.Element)return r.isSupported=!1,r;let{document:n}=e;const o=n,s=o.currentScript,{DocumentFragment:a,HTMLTemplateElement:c,Node:h,Element:u,NodeFilter:$,NamedNodeMap:C=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:O,DOMParser:F,trustedTypes:Y}=e,G=u.prototype,q=R(G,"cloneNode"),V=R(G,"remove"),K=R(G,"nextSibling"),Z=R(G,"childNodes"),Q=R(G,"parentNode");if("function"==typeof c){const t=n.createElement("template");t.content&&t.content.ownerDocument&&(n=t.content.ownerDocument)}let rt,it="";const{implementation:nt,createNodeIterator:ot,createDocumentFragment:st,getElementsByTagName:at}=n,{importNode:lt}=o;let ct={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};r.isSupported="function"==typeof i&&"function"==typeof Q&&nt&&void 0!==nt.createHTMLDocument;const{MUSTACHE_EXPR:dt,ERB_EXPR:ht,TMPLIT_EXPR:ut,DATA_ATTR:pt,ARIA_ATTR:mt,IS_SCRIPT_OR_DATA:ft,ATTR_WHITESPACE:gt,CUSTOM_ELEMENT:yt}=tt;let{IS_ALLOWED_URI:bt}=tt,vt=null;const _t=k({},[...P,...M,...L,...U,...H]);let wt=null;const xt=k({},[...z,...j,...B,...W]);let St=Object.seal(d(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),At=null,Tt=null,Et=!0,$t=!0,Ct=!1,kt=!0,Ot=!1,Nt=!0,Rt=!1,Pt=!1,Mt=!1,Lt=!1,It=!1,Ut=!1,Dt=!0,Ht=!1,zt=!0,jt=!1,Bt={},Wt=null;const Ft=k({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Yt=null;const Gt=k({},["audio","video","img","source","image","track"]);let qt=null;const Vt=k({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xt="http://www.w3.org/1998/Math/MathML",Kt="http://www.w3.org/2000/svg",Zt="http://www.w3.org/1999/xhtml";let Jt=Zt,Qt=!1,te=null;const ee=k({},[Xt,Kt,Zt],v);let re=k({},["mi","mo","mn","ms","mtext"]),ie=k({},["annotation-xml"]);const ne=k({},["title","style","font","a","script"]);let oe=null;const se=["application/xhtml+xml","text/html"];let ae=null,le=null;const ce=n.createElement("form"),de=function(t){return t instanceof RegExp||t instanceof Function},he=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!le||le!==t){if(t&&"object"==typeof t||(t={}),t=N(t),oe=-1===se.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,ae="application/xhtml+xml"===oe?v:b,vt=A(t,"ALLOWED_TAGS")?k({},t.ALLOWED_TAGS,ae):_t,wt=A(t,"ALLOWED_ATTR")?k({},t.ALLOWED_ATTR,ae):xt,te=A(t,"ALLOWED_NAMESPACES")?k({},t.ALLOWED_NAMESPACES,v):ee,qt=A(t,"ADD_URI_SAFE_ATTR")?k(N(Vt),t.ADD_URI_SAFE_ATTR,ae):Vt,Yt=A(t,"ADD_DATA_URI_TAGS")?k(N(Gt),t.ADD_DATA_URI_TAGS,ae):Gt,Wt=A(t,"FORBID_CONTENTS")?k({},t.FORBID_CONTENTS,ae):Ft,At=A(t,"FORBID_TAGS")?k({},t.FORBID_TAGS,ae):N({}),Tt=A(t,"FORBID_ATTR")?k({},t.FORBID_ATTR,ae):N({}),Bt=!!A(t,"USE_PROFILES")&&t.USE_PROFILES,Et=!1!==t.ALLOW_ARIA_ATTR,$t=!1!==t.ALLOW_DATA_ATTR,Ct=t.ALLOW_UNKNOWN_PROTOCOLS||!1,kt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Ot=t.SAFE_FOR_TEMPLATES||!1,Nt=!1!==t.SAFE_FOR_XML,Rt=t.WHOLE_DOCUMENT||!1,Lt=t.RETURN_DOM||!1,It=t.RETURN_DOM_FRAGMENT||!1,Ut=t.RETURN_TRUSTED_TYPE||!1,Mt=t.FORCE_BODY||!1,Dt=!1!==t.SANITIZE_DOM,Ht=t.SANITIZE_NAMED_PROPS||!1,zt=!1!==t.KEEP_CONTENT,jt=t.IN_PLACE||!1,bt=t.ALLOWED_URI_REGEXP||X,Jt=t.NAMESPACE||Zt,re=t.MATHML_TEXT_INTEGRATION_POINTS||re,ie=t.HTML_INTEGRATION_POINTS||ie,St=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&de(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(St.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&de(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(St.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(St.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ot&&($t=!1),It&&(Lt=!0),Bt&&(vt=k({},H),wt=[],!0===Bt.html&&(k(vt,P),k(wt,z)),!0===Bt.svg&&(k(vt,M),k(wt,j),k(wt,W)),!0===Bt.svgFilters&&(k(vt,L),k(wt,j),k(wt,W)),!0===Bt.mathMl&&(k(vt,U),k(wt,B),k(wt,W))),t.ADD_TAGS&&(vt===_t&&(vt=N(vt)),k(vt,t.ADD_TAGS,ae)),t.ADD_ATTR&&(wt===xt&&(wt=N(wt)),k(wt,t.ADD_ATTR,ae)),t.ADD_URI_SAFE_ATTR&&k(qt,t.ADD_URI_SAFE_ATTR,ae),t.FORBID_CONTENTS&&(Wt===Ft&&(Wt=N(Wt)),k(Wt,t.FORBID_CONTENTS,ae)),zt&&(vt["#text"]=!0),Rt&&k(vt,["html","head","body"]),vt.table&&(k(vt,["tbody"]),delete At.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw E('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw E('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');rt=t.TRUSTED_TYPES_POLICY,it=rt.createHTML("")}else void 0===rt&&(rt=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let r=null;const i="data-tt-policy-suffix";e&&e.hasAttribute(i)&&(r=e.getAttribute(i));const n="dompurify"+(r?"#"+r:"");try{return t.createPolicy(n,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+n+" could not be created."),null}}(Y,s)),null!==rt&&"string"==typeof it&&(it=rt.createHTML(""));l&&l(t),le=t}},ue=k({},[...M,...L,...I]),pe=k({},[...U,...D]),me=function(t){g(r.removed,{element:t});try{Q(t).removeChild(t)}catch(e){V(t)}},fe=function(t,e){try{g(r.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){g(r.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(Lt||It)try{me(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},ge=function(t){let e=null,r=null;if(Mt)t="<remove></remove>"+t;else{const e=_(t,/^[\r\n\t ]+/);r=e&&e[0]}"application/xhtml+xml"===oe&&Jt===Zt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const i=rt?rt.createHTML(t):t;if(Jt===Zt)try{e=(new F).parseFromString(i,oe)}catch(t){}if(!e||!e.documentElement){e=nt.createDocument(Jt,"template",null);try{e.documentElement.innerHTML=Qt?it:i}catch(t){}}const o=e.body||e.documentElement;return t&&r&&o.insertBefore(n.createTextNode(r),o.childNodes[0]||null),Jt===Zt?at.call(e,Rt?"html":"body")[0]:Rt?e.documentElement:o},ye=function(t){return ot.call(t.ownerDocument||t,t,$.SHOW_ELEMENT|$.SHOW_COMMENT|$.SHOW_TEXT|$.SHOW_PROCESSING_INSTRUCTION|$.SHOW_CDATA_SECTION,null)},be=function(t){return t instanceof O&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof C)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},ve=function(t){return"function"==typeof h&&t instanceof h};function _e(t,e,i){p(t,t=>{t.call(r,e,i,le)})}const we=function(t){let e=null;if(_e(ct.beforeSanitizeElements,t,null),be(t))return me(t),!0;const i=ae(t.nodeName);if(_e(ct.uponSanitizeElement,t,{tagName:i,allowedTags:vt}),Nt&&t.hasChildNodes()&&!ve(t.firstElementChild)&&T(/<[/\w!]/g,t.innerHTML)&&T(/<[/\w!]/g,t.textContent))return me(t),!0;if(7===t.nodeType)return me(t),!0;if(Nt&&8===t.nodeType&&T(/<[/\w]/g,t.data))return me(t),!0;if(!vt[i]||At[i]){if(!At[i]&&Se(i)){if(St.tagNameCheck instanceof RegExp&&T(St.tagNameCheck,i))return!1;if(St.tagNameCheck instanceof Function&&St.tagNameCheck(i))return!1}if(zt&&!Wt[i]){const e=Q(t)||t.parentNode,r=Z(t)||t.childNodes;if(r&&e)for(let i=r.length-1;i>=0;--i){const n=q(r[i],!0);n.__removalCount=(t.__removalCount||0)+1,e.insertBefore(n,K(t))}}return me(t),!0}return t instanceof u&&!function(t){let e=Q(t);e&&e.tagName||(e={namespaceURI:Jt,tagName:"template"});const r=b(t.tagName),i=b(e.tagName);return!!te[t.namespaceURI]&&(t.namespaceURI===Kt?e.namespaceURI===Zt?"svg"===r:e.namespaceURI===Xt?"svg"===r&&("annotation-xml"===i||re[i]):Boolean(ue[r]):t.namespaceURI===Xt?e.namespaceURI===Zt?"math"===r:e.namespaceURI===Kt?"math"===r&&ie[i]:Boolean(pe[r]):t.namespaceURI===Zt?!(e.namespaceURI===Kt&&!ie[i])&&!(e.namespaceURI===Xt&&!re[i])&&!pe[r]&&(ne[r]||!ue[r]):!("application/xhtml+xml"!==oe||!te[t.namespaceURI]))}(t)?(me(t),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!T(/<\/no(script|embed|frames)/i,t.innerHTML)?(Ot&&3===t.nodeType&&(e=t.textContent,p([dt,ht,ut],t=>{e=w(e,t," ")}),t.textContent!==e&&(g(r.removed,{element:t.cloneNode()}),t.textContent=e)),_e(ct.afterSanitizeElements,t,null),!1):(me(t),!0)},xe=function(t,e,r){if(Dt&&("id"===e||"name"===e)&&(r in n||r in ce))return!1;if($t&&!Tt[e]&&T(pt,e));else if(Et&&T(mt,e));else if(!wt[e]||Tt[e]){if(!(Se(t)&&(St.tagNameCheck instanceof RegExp&&T(St.tagNameCheck,t)||St.tagNameCheck instanceof Function&&St.tagNameCheck(t))&&(St.attributeNameCheck instanceof RegExp&&T(St.attributeNameCheck,e)||St.attributeNameCheck instanceof Function&&St.attributeNameCheck(e))||"is"===e&&St.allowCustomizedBuiltInElements&&(St.tagNameCheck instanceof RegExp&&T(St.tagNameCheck,r)||St.tagNameCheck instanceof Function&&St.tagNameCheck(r))))return!1}else if(qt[e]);else if(T(bt,w(r,gt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==x(r,"data:")||!Yt[t])if(Ct&&!T(ft,w(r,gt,"")));else if(r)return!1;return!0},Se=function(t){return"annotation-xml"!==t&&_(t,yt)},Ae=function(t){_e(ct.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||be(t))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:wt,forceKeepAttr:void 0};let n=e.length;for(;n--;){const o=e[n],{name:s,namespaceURI:a,value:l}=o,c=ae(s),d=l;let h="value"===s?d:S(d);if(i.attrName=c,i.attrValue=h,i.keepAttr=!0,i.forceKeepAttr=void 0,_e(ct.uponSanitizeAttribute,t,i),h=i.attrValue,!Ht||"id"!==c&&"name"!==c||(fe(s,t),h="user-content-"+h),Nt&&T(/((--!?|])>)|<\/(style|title)/i,h)){fe(s,t);continue}if(i.forceKeepAttr)continue;if(!i.keepAttr){fe(s,t);continue}if(!kt&&T(/\/>/i,h)){fe(s,t);continue}Ot&&p([dt,ht,ut],t=>{h=w(h,t," ")});const u=ae(t.nodeName);if(xe(u,c,h)){if(rt&&"object"==typeof Y&&"function"==typeof Y.getAttributeType)if(a);else switch(Y.getAttributeType(u,c)){case"TrustedHTML":h=rt.createHTML(h);break;case"TrustedScriptURL":h=rt.createScriptURL(h)}if(h!==d)try{a?t.setAttributeNS(a,s,h):t.setAttribute(s,h),be(t)?me(t):f(r.removed)}catch(e){fe(s,t)}}else fe(s,t)}_e(ct.afterSanitizeAttributes,t,null)},Te=function t(e){let r=null;const i=ye(e);for(_e(ct.beforeSanitizeShadowDOM,e,null);r=i.nextNode();)_e(ct.uponSanitizeShadowNode,r,null),we(r),Ae(r),r.content instanceof a&&t(r.content);_e(ct.afterSanitizeShadowDOM,e,null)};return r.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,n=null,s=null,l=null;if(Qt=!t,Qt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!ve(t)){if("function"!=typeof t.toString)throw E("toString is not a function");if("string"!=typeof(t=t.toString()))throw E("dirty is not a string, aborting")}if(!r.isSupported)return t;if(Pt||he(e),r.removed=[],"string"==typeof t&&(jt=!1),jt){if(t.nodeName){const e=ae(t.nodeName);if(!vt[e]||At[e])throw E("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof h)i=ge("\x3c!----\x3e"),n=i.ownerDocument.importNode(t,!0),1===n.nodeType&&"BODY"===n.nodeName||"HTML"===n.nodeName?i=n:i.appendChild(n);else{if(!Lt&&!Ot&&!Rt&&-1===t.indexOf("<"))return rt&&Ut?rt.createHTML(t):t;if(i=ge(t),!i)return Lt?null:Ut?it:""}i&&Mt&&me(i.firstChild);const c=ye(jt?t:i);for(;s=c.nextNode();)we(s),Ae(s),s.content instanceof a&&Te(s.content);if(jt)return t;if(Lt){if(It)for(l=st.call(i.ownerDocument);i.firstChild;)l.appendChild(i.firstChild);else l=i;return(wt.shadowroot||wt.shadowrootmode)&&(l=lt.call(o,l,!0)),l}let d=Rt?i.outerHTML:i.innerHTML;return Rt&&vt["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&T(J,i.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+d),Ot&&p([dt,ht,ut],t=>{d=w(d,t," ")}),rt&&Ut?rt.createHTML(d):d},r.setConfig=function(){he(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Pt=!0},r.clearConfig=function(){le=null,Pt=!1},r.isValidAttribute=function(t,e,r){le||he({});const i=ae(t),n=ae(e);return xe(i,n,r)},r.addHook=function(t,e){"function"==typeof e&&g(ct[t],e)},r.removeHook=function(t,e){if(void 0!==e){const r=m(ct[t],e);return-1===r?void 0:y(ct[t],r,1)[0]}return f(ct[t])},r.removeHooks=function(t){ct[t]=[]},r.removeAllHooks=function(){ct={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},r}()}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={id:i,exports:{}};return t[i](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=r(36774),e=r(38085),i=r(93811),n=r(95665),o=r(30827),s=r(32267),a=r(33331),l=(r(59859),r(78524),r(55367)),c=r.n(l),d=function(t,e,r,i){var n,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,r,s):n(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},h=function(t,e,r,i){return new(r||(r=Promise))(function(n,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(s,a)}l((i=i.apply(t,e||[])).next())})};const u=e.SHARED_COMPONENTS.PageContentPreview;class p extends o.y{constructor(){super(),this.showOverlay=!0,this.components=[e.SHARED_COMPONENTS.Skeleton.TAG],this._content=new t.YZ(this,{task:t=>h(this,[t],void 0,function*([t]){var r,i;const{isStorageLimitReached:n}=yield(0,e.getPageContentStorageUsageInfo)();if(!t)return{isStorageLimitReached:n,pageContent:null};const o=yield this.getPageContentResult();if(this.props.isCurrentPageMode&&(null==o?void 0:o.existingPageContent)){const{pageContent:t}=(0,e.getPageContentFromPage)();if((null==t?void 0:t.content)&&(null==o?void 0:o.existingPageContent)&&(null==t?void 0:t.content)!==(null===(r=null==o?void 0:o.existingPageContent)||void 0===r?void 0:r.content))return yield(0,e.createOrUpdatePageContent)(Object.assign(Object.assign({},o.existingPageContent),{content:t.content,wasUpdatedWithLatestContentFromAppType:(0,e.useContext)().appConfig.appType}),{isIgnoreStorageLimit:!0}),{pageContent:t,isStorageLimitReached:n}}return{pageContent:null!==(i=null==o?void 0:o.pageContent)&&void 0!==i?i:null,isStorageLimitReached:n}}),args:()=>[this.props.pageContent.url]}),(0,e.setReaderStyles)()}firstUpdated(t){var e;super.firstUpdated(t),this.showOverlay=null===(e=this.props.showOverlay)||void 0===e||e}getPageContentResult(){return h(this,void 0,void 0,function*(){var t;return this.props.pageContent?(0,e.getPageContentResult)({url:this.props.pageContent.url,isUrlCrawlEnabled:null!==(t=this.props.isUrlCrawlEnabled)&&void 0!==t&&t}):null})}onOpenInReader(){return h(this,void 0,void 0,function*(){var t,r,i;const n=this._content.value,o=yield this.getPageContentResult(),{isStorageLimitReached:s}=yield(0,e.getPageContentStorageUsageInfo)();n&&(null==o?void 0:o.pageContent)&&(!(null===(t=null==o?void 0:o.existingPageContent)||void 0===t?void 0:t.content)&&(yield(0,e.createOrUpdatePageContent)(Object.assign(Object.assign({},null==o?void 0:o.pageContent),{content:null!==(i=null===(r=n.pageContent)||void 0===r?void 0:r.content)&&void 0!==i?i:""})),s)||e.notifications.dispatch("openInReader",{detail:[{url:this.props.pageContent.url}]}))})}onCloseOverlay(){this.showOverlay=!1}render(){var r;return this.props?i.html`
      ${s.e}

      <div class="reader-content">
        <article id="reader" part="reader">
          ${this._content.render({pending:()=>i.html`
              <div
                class="article-skeleton-container"
                data-testid="${u.TEST_IDS.SKELETON}"
              >
                <webhighlights-skeleton
                  variant="title"
                  style="width: 85%; height: 2.5rem;"
                ></webhighlights-skeleton>
                <webhighlights-skeleton
                  variant="subtitle"
                  style="width: 70%; height: 1.5rem; margin-bottom: 1rem;"
                ></webhighlights-skeleton>
                ${Array.from({length:5}).map((t,e)=>i.html`
                    <webhighlights-skeleton
                      style="width: 100%; height: 1.2rem;"
                    ></webhighlights-skeleton>
                  `)}
              </div>
            `,complete:({pageContent:t})=>(0,a.B)(t,{disableStickyPlayer:!0})})}
        </article>
      </div>

      ${this.showOverlay&&this._content.status===t.e1.COMPLETE?i.html`
            <div class="overlay-button-container">
              <button class="close-btn" @click=${this.onCloseOverlay}>
                <webhighlights-icon
                  size="16"
                  icon=${e.ICON_NAMES["delete-x"]}
                ></webhighlights-icon>
              </button>
              <button
                class="primary-btn open-reader-btn"
                data-testid="${u.TEST_IDS.OPEN_IN_READER_BUTTON}"
                @click=${this.onOpenInReader}
              >
                <webhighlights-icon
                  size="16"
                  icon=${e.ICON_NAMES.reader}
                ></webhighlights-icon>
                Open in reader
              </button>
            </div>
          `:i.html``}
      ${this._content.status===t.e1.COMPLETE?i.html`
            <hr class="empty-state-divider" />
            <div class="empty-state">
              <div class="empty-state-content">
                <webhighlights-icon
                  icon="${e.ICON_NAMES.bulb}"
                  class="empty-state-icon"
                  size="32"
                ></webhighlights-icon>
                <h2 data-testid="${u.TEST_IDS.CONTENT_MISSING_TITLE}">
                  Content missing?
                </h2>
                <p>
                  We can only fetch content from public pages. To save content
                  that's behind a login or paywall, just visit the page using
                  our
                  <a
                    href="${null===(r=(0,e.useContextWithCatch)())||void 0===r?void 0:r.environment.WEBSITE_URL}/install"
                    target="_blank"
                    >browser add-on</a
                  >
                  and click "Save document".
                </p>
              </div>
            </div>
          `:i.html``}
    `:i.html``}}p.styles=[(0,i.unsafeCSS)(c())],d([(0,n.property)()],p.prototype,"props",void 0),d([(0,n.state)()],p.prototype,"showOverlay",void 0),o.y.define("webhighlights-page-content-preview",p)})()})();