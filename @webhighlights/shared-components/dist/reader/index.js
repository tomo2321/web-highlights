/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={9561:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});var o=i(36758),r=i.n(o),n=i(40935),a=i.n(n)()(r());a.push([t.id,"#reader-controls{position:fixed;top:8px}#reader-controls:focus{outline:none}#reader-controls.right{right:8px}#reader-controls.left{left:8px}@media(min-width: 768px){#reader-controls{top:16px}#reader-controls.right{right:40px}#reader-controls.left{left:40px}}",""]);const s=a},10013:(t,e,i)=>{var o=i(56650);o&&o.__esModule&&(o=o.default),t.exports="string"==typeof o?o:o.toString()},15606:(t,e,i)=>{var o=i(9561);o&&o.__esModule&&(o=o.default),t.exports="string"==typeof o?o:o.toString()},16655:(t,e,i)=>{"use strict";i.d(e,{OA:()=>o,WL:()=>n,u$:()=>r});const o={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},r=t=>(...e)=>({_$litDirective$:t,values:e});class n{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}},16886:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});var o=i(36758),r=i.n(o),n=i(40935),a=i.n(n)()(r());a.push([t.id,'html,body{background-color:#ffffff;background-color:var(--wh-reader-bg-color, #ffffff);transition:color .3s ease,background-color .3s ease}#reader{width:700px;width:var(--wh-reader-layout-width, 700px);max-width:100vw;min-width:300px;font-size:18px;font-size:var(--wh-reader-font-size, 18px);box-sizing:border-box;min-height:100vh;margin:0 auto;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;line-height:1.6;line-height:var(--wh-reader-line-height, 1.6);padding:1.5rem 1.25rem;background-color:#ffffff;background-color:var(--wh-reader-bg-color, #ffffff);color:#333333;color:var(--wh-reader-color, #333333);transition:color .3s ease,background-color .3s ease}@media screen and (max-width: 768px){#reader{max-width:100vw}}#reader h1,#reader h2,#reader h3,#reader h4,#reader h5,#reader h6{font-weight:bold;line-height:1.3;margin:1.5em 0 .75em}#reader h1{font-size:1.6em}#reader h2{font-size:1.2em}#reader h3{font-size:1.1em}@media(min-width: 768px){#reader h1{font-size:1.7em}#reader h2{font-size:1.4em}#reader h3{font-size:1.2em}}#reader p{margin:0 0 1.5em}#reader img{max-width:100%;height:auto;margin:1em 0}#reader figure{margin:1.5em 0}#reader figure figcaption{font-size:.9em;color:#666666;color:var(--wh-reader-figcaption-color, #666666);margin-top:.5em}#reader blockquote{margin:1.5em 0;padding:0 1em;border-left:3px solid #dddddd;border-left:3px solid var(--wh-reader-blockquote-border-color, #dddddd);color:#666666;color:var(--wh-reader-blockquote-color, #666666)}#reader pre,#reader code{font-family:Consolas,Monaco,"Andale Mono",monospace;font-size:.9em;background:#f5f5f5;background:var(--wh-reader-code-bg-color, #f5f5f5);padding:.2em .4em;border-radius:3px}#reader pre{padding:1em;overflow-x:auto;margin:1.5em 0}#reader a{color:#1a73e8;color:var(--wh-reader-link-color, #1a73e8);text-decoration:none}#reader a:hover{text-decoration:underline}#reader ul,#reader ol{margin:1.5em 0;padding-left:2em}#reader li{margin:.5em 0}#reader hr{border:none;border-top:1px solid #dddddd;border-top:1px solid var(--wh-reader-hr-color, #dddddd);margin:2em 0}#reader table{border-collapse:collapse;width:100%;margin:1.5em 0}#reader th,#reader td{padding:.5em;border:1px solid #dddddd;border:1px solid var(--wh-reader-table-border-color, #dddddd);text-align:left}#reader th{background:#f5f5f5;background:var(--wh-reader-table-header-bg-color, #f5f5f5);font-weight:bold}',""]);const s=a},21634:(t,e,i)=>{"use strict";var o=i(36774),r=i(38085),n=i(93811),a=i(95665),s=i(30827),l=i(10013),d=i.n(l),c=function(t,e,i,o){var r,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a},p=function(t,e,i,o){return new(i||(i=Promise))(function(r,n){function a(t){try{l(o.next(t))}catch(t){n(t)}}function s(t){try{l(o.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}l((o=o.apply(t,e||[])).next())})};const h=r.SHARED_COMPONENTS_INTERNAL.ReaderControls;(new CSSStyleSheet).replaceSync(d());class u extends s.y{constructor(){super(...arguments),this.activeDropdown=null,this.youtubePlayerState=null,this.components=[r.SHARED_COMPONENTS.Icon.TAG],this._controlOptionsData=new o.YZ(this,{task:()=>p(this,void 0,void 0,function*(){const[t,e]=yield Promise.all([(0,r.useContext)().db.getChromeSettings(),(0,r.getReaderStyleOptions)()]),i=t.sidebarOptions;return{activeColorMode:e.colorMode,sidebarAlignment:i.sidebarAlignment,youtubeOptions:t.youtubeOptions||r.fallbackYoutubeOptions}}),args:()=>[]})}firstUpdated(t){this.initListener(),this.initScrollHandler()}disconnectedCallback(){this.scrollHandler&&window.removeEventListener("scroll",this.scrollHandler),super.disconnectedCallback()}initListener(){this.subscriptions=[r.notifications.subscribe("updatedChromeSettings",()=>{this._controlOptionsData.run()}),r.notifications.subscribe("youtubePlayerStateChanged",t=>{this.youtubePlayerState=t.detail.playerState})]}initScrollHandler(){this.scrollHandler=t=>{0!==window.scrollY?this.classList.contains("scrolled")||this.classList.add("scrolled"):this.classList.remove("scrolled")},window.addEventListener("scroll",this.scrollHandler,{passive:!0}),this.scrollHandler()}updateReaderStyleOptions(t){this._controlOptionsData.run(),(0,r.setReaderStyleOptions)(t)}changeFontSize(t){return p(this,void 0,void 0,function*(){const e=yield(0,r.getReaderStyleOptions)();return this.updateReaderStyleOptions({fontSize:e.fontSize+t}),this.notifyUpdate()})}changeLayoutWidth(t){return p(this,void 0,void 0,function*(){const e=yield(0,r.getReaderStyleOptions)();return this.updateReaderStyleOptions({layoutWidth:Math.max(300,e.layoutWidth+t)}),this.notifyUpdate()})}changeLineHeight(t){return p(this,void 0,void 0,function*(){const e=yield(0,r.getReaderStyleOptions)();return this.updateReaderStyleOptions({lineHeight:Math.max(.7,Math.min(3,e.lineHeight+t))}),this.notifyUpdate()})}notifyUpdate(){this.dispatchEvent(new CustomEvent("updatedStyles"))}toggleSidebar(){r.notifications.dispatch("toggleSidebar",{detail:{}})}updateColorMode(t){this.updateReaderStyleOptions({colorMode:t}),this.notifyUpdate(),this.activeDropdown=null,this.dispatchEvent(new CustomEvent("updatedColorMode",{detail:{colorMode:t}}))}toggleDropdown(t){this.activeDropdown=this.activeDropdown===t?null:t;const e=t=>{var i;const o=null==t?void 0:t.target;(null===(i=null==o?void 0:o.tagName)||void 0===i?void 0:i.toLowerCase())!==h.TAG&&(this.activeDropdown=null,this.classList.remove("active"),document.removeEventListener("click",e))};this.activeDropdown&&(this.classList.add("active"),document.addEventListener("click",e))}onAddContent(){(0,r.onAddContentFromReader)()}toggleAutoScrolling(){return p(this,void 0,void 0,function*(){var t;const e=yield(0,r.useContext)().db.getChromeSettings(),i={_id:e._id,youtubeOptions:Object.assign(Object.assign({},e.youtubeOptions||r.fallbackYoutubeOptions),{enableAutoscrolling:!(null===(t=e.youtubeOptions)||void 0===t?void 0:t.enableAutoscrolling)})};yield(0,r.updateChromeSettings)(i)})}toggleStickyPlayer(){return p(this,void 0,void 0,function*(){var t;const e=yield(0,r.useContext)().db.getChromeSettings(),i={_id:e._id,youtubeOptions:Object.assign(Object.assign({},e.youtubeOptions||r.fallbackYoutubeOptions),{enableStickyPlayer:!(null===(t=e.youtubeOptions)||void 0===t?void 0:t.enableStickyPlayer)})};yield(0,r.updateChromeSettings)(i)})}togglePlayPause(){"playing"===this.youtubePlayerState?r.notifications.dispatch("youtubePlayerAction",{detail:{type:"pause"}}):r.notifications.dispatch("youtubePlayerAction",{detail:{type:"play"}})}render(){return n.html`
      ${this._controlOptionsData.render({pending:()=>n.html``,complete:({activeColorMode:t,sidebarAlignment:e,youtubeOptions:i})=>{const o={light:"Light",sepia:"Sepia",dark:"Dark",auto:"Auto",contrast:"Contrast"},a="left"===e?"right: 40px;":"left: 40px;",s="left"===e?"right":"left";return n.html`
            <button
              class="main-control-btn toggle-sidebar-btn"
              @click=${this.toggleSidebar}
              title="Toggle sidebar"
              aria-label="Toggle sidebar"
              data-testid="${h.TEST_IDS.TOGGLE_SIDEBAR_BTN}"
            >
              <webhighlights-icon
                size="16"
                icon=${r.ICON_NAMES["mark-icon"]}
              ></webhighlights-icon>
            </button>
            <ul class="control-dropdown-list">
              <li>
                <button
                  @click=${()=>this.toggleDropdown("layout")}
                  title="Text & Layout"
                  class="main-control-btn ${"layout"===this.activeDropdown?"active":""}"
                  data-testid="${h.TEST_IDS.TEXT_LAYOUT_BTN}"
                >
                  <webhighlights-icon
                    size="16"
                    icon=${r.ICON_NAMES.font}
                  ></webhighlights-icon>
                </button>
              </li>

              <li
                class="control-dropdown ${"layout"===this.activeDropdown?"open":""}"
                @blurred=${()=>this.toggleDropdown(null)}
                style="${a}"
                role="menu"
              >
                <section class="control-dropdown-layout-section">
                  <webhighlights-icon
                    size="16"
                    title="Change font size"
                    icon=${r.ICON_NAMES.font}
                  ></webhighlights-icon>
                  <div class="control-dropdown-layout-section-entry">
                    <button
                      @click=${()=>this.changeFontSize(-1)}
                      title="Decrease font size"
                      data-testid="${h.TEST_IDS.FONT_SIZE_BTN_MINUS}"
                    >
                      <webhighlights-icon
                        size="16"
                        icon=${r.ICON_NAMES["minus-circle"]}
                      ></webhighlights-icon>
                    </button>
                    <button
                      @click=${()=>this.changeFontSize(1)}
                      title="Increase font size"
                      data-testid="${h.TEST_IDS.FONT_SIZE_BTN_PLUS}"
                    >
                      <webhighlights-icon
                        size="16"
                        icon=${r.ICON_NAMES["plus-circle"]}
                      ></webhighlights-icon>
                    </button>
                  </div>
                </section>
                <section class="control-dropdown-layout-section">
                  <webhighlights-icon
                    size="16"
                    title="Change layout width"
                    icon=${r.ICON_NAMES.width}
                  ></webhighlights-icon>
                  <div class="control-dropdown-layout-section-entry">
                    <button
                      @click=${()=>this.changeLayoutWidth(-20)}
                      title="Decrease layout width"
                      data-testid="${h.TEST_IDS.LAYOUT_WIDTH_BTN_MINUS}"
                    >
                      <webhighlights-icon
                        size="16"
                        icon=${r.ICON_NAMES["minus-circle"]}
                      ></webhighlights-icon>
                    </button>
                    <button
                      @click=${()=>this.changeLayoutWidth(20)}
                      title="Increase layout width"
                      data-testid="${h.TEST_IDS.LAYOUT_WIDTH_BTN_PLUS}"
                    >
                      <webhighlights-icon
                        size="16"
                        icon=${r.ICON_NAMES["plus-circle"]}
                      ></webhighlights-icon>
                    </button>
                  </div>
                </section>
                <section class="control-dropdown-layout-section">
                  <webhighlights-icon
                    size="16"
                    title="Change line height"
                    icon=${r.ICON_NAMES.height}
                  ></webhighlights-icon>
                  <div class="control-dropdown-layout-section-entry">
                    <button
                      @click=${()=>this.changeLineHeight(-.1)}
                      title="Decrease line height"
                      data-testid="${h.TEST_IDS.LINE_HEIGHT_BTN_MINUS}"
                    >
                      <webhighlights-icon
                        size="16"
                        icon=${r.ICON_NAMES["minus-circle"]}
                      ></webhighlights-icon>
                    </button>
                    <button
                      @click=${()=>this.changeLineHeight(.1)}
                      title="Increase line height"
                      data-testid="${h.TEST_IDS.LINE_HEIGHT_BTN_PLUS}"
                    >
                      <webhighlights-icon
                        size="16"
                        icon=${r.ICON_NAMES["plus-circle"]}
                      ></webhighlights-icon>
                    </button>
                  </div>
                </section>
              </li>
            </ul>
            <ul class="control-dropdown-list">
              <li>
                <button
                  @click=${()=>this.toggleDropdown("color")}
                  title="Change color mode"
                  class="main-control-btn ${"color"===this.activeDropdown?"active":""}"
                  data-testid="${h.TEST_IDS.CHANGE_COLOR_MODE_BTN}"
                >
                  <webhighlights-icon
                    size="16"
                    icon=${r.ICON_NAMES["paint-brush"]}
                  ></webhighlights-icon>
                </button>
              </li>
              <li
                class="control-dropdown ${"color"===this.activeDropdown?"open":""}"
                @blurred=${()=>this.toggleDropdown(null)}
                style="${a}"
                data-testid="${h.TEST_IDS.COLOR_MODE_DROPDOWN}"
                role="menu"
              >
                ${r.READER_COLOR_MODES.map(e=>n.html`
                    <button
                      class="control-dropdown-item ${t===e?"active":""}"
                      @click=${()=>this.updateColorMode(e)}
                      data-testid="${h.TEST_IDS.COLOR_MODE_BTN(e)}"
                    >
                      <style>
                        .color-mode-icon.${e} {
                          fill: ${(0,r.getReaderColorModeMap)()[e]["--wh-reader-bg-color"]};
                          color: ${(0,r.getReaderColorModeMap)()[e]["--wh-reader-bg-color"]};
                        }
                        .color-mode-icon::part(icon) {
                          border-radius: 50%;
                          border: 1px solid rgba(120, 120, 120, 0.5);
                        }
                      </style>
                      <webhighlights-icon
                        class="color-mode-icon ${e}"
                        size="16"
                        strokeWidth="10"
                        icon=${r.readerColorModeIconMap[e]}
                      ></webhighlights-icon>
                      <span>${o[e]}</span>
                    </button>
                  `)}
              </li>
            </ul>

            <!-- Create new content button -->
            <button
              @click=${()=>this.onAddContent()}
              title="Add content"
              class="main-control-btn"
              data-testid="${h.TEST_IDS.ADD_CONTENT_BTN}"
            >
              <webhighlights-icon
                size="16"
                icon=${r.ICON_NAMES.plus}
              ></webhighlights-icon>
            </button>

            <!-- Youtueb player controls -->
            ${null!==this.youtubePlayerState?n.html`
                  <sl-tooltip
                    placement="${s}"
                    content="${i.enableStickyPlayer?"Unpin video":"Pin video"}"
                    distance="4"
                  >
                    <button
                      class="main-control-btn ${i.enableStickyPlayer?"active":""}"
                      @click=${this.toggleStickyPlayer}
                    >
                      <webhighlights-icon
                        icon=${r.ICON_NAMES.pin}
                        .strokeWidth=${1.5}
                        .size=${20}
                      ></webhighlights-icon>
                    </button>
                  </sl-tooltip>
                  <sl-tooltip
                    placement="${s}"
                    content="${i.enableAutoscrolling?"Disable":"Enable"} auto-scroll"
                    distance="4"
                  >
                    <button
                      class="main-control-btn ${i.enableAutoscrolling?"active":""}"
                      @click=${this.toggleAutoScrolling}
                    >
                      <webhighlights-icon
                        icon=${r.ICON_NAMES.target}
                        .strokeWidth=${1.5}
                        .size=${20}
                      ></webhighlights-icon>
                    </button>
                  </sl-tooltip>

                  <!-- Youtube play/pause button -->
                  <button
                    class="main-control-btn ${"playing"===this.youtubePlayerState?"active":""}"
                    title="${"playing"===this.youtubePlayerState?"Pause":"Play"}"
                    data-testid="${h.TEST_IDS.PLAY_PAUSE_BTN}"
                    @click=${this.togglePlayPause}
                  >
                    <webhighlights-icon
                      icon=${"playing"===this.youtubePlayerState?r.ICON_NAMES.pause:r.ICON_NAMES.play}
                      .strokeWidth=${1.5}
                      .size=${20}
                    ></webhighlights-icon>
                  </button>
                `:n.html``}
          `}})}
    `}}u.styles=[(0,n.unsafeCSS)(d())],c([(0,a.state)()],u.prototype,"activeDropdown",void 0),c([(0,a.query)(".control-dropdown.open .control-dropdown-item:nth-child(1)")],u.prototype,"firstDropdownItem",void 0),c([(0,a.state)()],u.prototype,"youtubePlayerState",void 0),s.y.define("webhighlights-reader-controls",u)},27954:(t,e,i)=>{var o=i(35923);o&&o.__esModule&&(o=o.default),t.exports="string"==typeof o?o:o.toString()},29843:(t,e,i)=>{var o=i(86718);o&&o.__esModule&&(o=o.default),t.exports="string"==typeof o?o:o.toString()},30827:(t,e,i)=>{"use strict";i.d(e,{y:()=>n});var o=i(38085),r=i(93811);class n extends r.LitElement{constructor(){super(...arguments),this.components=[],this.subscriptions=[]}connectedCallback(){super.connectedCallback(),(0,o.lazyDefine)(this.components)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe()}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()})}static define(t,e,i){(0,o.defineWebHighlightsElement)(t,e,i)}}},32267:(t,e,i)=>{"use strict";i.d(e,{e:()=>d});var o=i(93811),r=i(43715),n=i.n(r),a=i(29843),s=i.n(a);const l=new CSSStyleSheet;l.replaceSync(s()),l.replaceSync(n());const d=o.html`<style>
  ${s()}
  ${n()}
</style>`},33331:(t,e,i)=>{"use strict";i.d(e,{B:()=>s});var o=i(38085),r=i(97519),n=i(93811),a=i(38163);const s=(t,{disableStickyPlayer:e}={disableStickyPlayer:!1})=>{var i,s;if(!t)return n.html``;if((0,o.isYoutubeUrl)(t.url)&&(null===(i=t.youtubeTranscript)||void 0===i?void 0:i.transcriptMarkers.length)){const i={pageContent:t},r=(0,o.isWebAppUrl)(location.href)||(0,o.isReaderPage)();return n.html`${r?n.html`<webhighlights-youtube-player
            .youtubeUrl=${t.url}
            .disableStickyPlayer=${e}
          ></webhighlights-youtube-player>`:n.html``}<webhighlights-youtube-transcript
        .props=${i}
      ></webhighlights-youtube-transcript>`}return n.html`${(0,a._)(r.A.sanitize(null!==(s=t.content)&&void 0!==s?s:""))}`}},35923:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});var o=i(36758),r=i.n(o),n=i(40935),a=i.n(n)()(r());a.push([t.id,'.wh-loading-skeleton{color:rgba(0,0,0,0);opacity:.8;animation:1.25s linear 0s infinite normal none running loadingBlinking;background:var(--wh-skeleton-bg);border-radius:4px;position:relative;overflow:hidden}.wh-loading-skeleton::after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, var(--wh-skeleton-bg-hover), transparent);animation:skeleton-shimmer 2s infinite}@keyframes loadingBlinking{0%{background:var(--wh-skeleton-bg)}70%{background:var(--wh-skeleton-bg-hover)}100%{background:var(--wh-skeleton-bg-strong)}}@keyframes skeleton-shimmer{0%{left:-100%}100%{left:100%}}:host{font-family:var(--wh-font-family);box-sizing:border-box}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.primary-btn{box-shadow:5px 7px 6px -4px rgba(0,0,0,.1);padding:10px 20px;border:none;border-radius:4px;color:#fff;font-weight:400;font-family:var(--wh-font-family);cursor:pointer;background:var(--wh-primary-700);text-decoration:none}.primary-btn:disabled{background:var(--wh-bg-disabled);color:var(--wh-text-light);cursor:not-allowed;box-shadow:none}.primary-btn:not(:disabled):hover{background:var(--wh-primary-600)}.secondary-btn{box-shadow:5px 7px 6px -4px rgba(0,0,0,.1);padding:10px 20px;border:none;border-radius:4px;color:#fff;font-weight:400;font-family:var(--wh-font-family);cursor:pointer;background:var(--wh-gray-50);border:.5px solid rgba(47,50,55,.2392156863);background:var(--wh-gray-50);color:var(--wh-gray-600)}.secondary-btn:disabled{background:var(--wh-bg-disabled);color:var(--wh-text-light);cursor:not-allowed;box-shadow:none}.primary-text-btn{box-shadow:5px 7px 6px -4px rgba(0,0,0,.1);padding:10px 20px;border:none;border-radius:4px;color:#fff;font-weight:400;font-family:var(--wh-font-family);cursor:pointer;color:#fff;background:var(--secondary-dark);border:1px solid var(--wh-primary-600)}.primary-text-btn:disabled{background:var(--wh-bg-disabled);color:var(--wh-text-light);cursor:not-allowed;box-shadow:none}.chrome-btn{box-shadow:5px 7px 6px -4px rgba(0,0,0,.1);padding:10px 20px;border:none;border-radius:4px;color:#fff;font-weight:400;font-family:var(--wh-font-family);cursor:pointer;padding:0;background:var(--wh-primary-600);box-shadow:0px 2px 1px -1px rgba(var(--wh-primary-600), 0.6),0 1px 1px 0 rgba(var(--wh-primary-600), 0.341),0 1px 3px 0 rgba(var(--wh-primary-600), 0.322)}.chrome-btn:disabled{background:var(--wh-bg-disabled);color:var(--wh-text-light);cursor:not-allowed;box-shadow:none}.chrome-btn a{text-decoration:none;padding:10px 20px;line-height:40px;color:#fff}.chrome-btn:hover{background:var(--wh-primary-600);transition:all .2s ease;transform:scale(1.03)}:host{font-family:var(--wh-font-family);color:var(--wh-text)}article.is-youtube-video .reader-title{margin:8px 0 8px 0 !important;font-size:24px !important}@media(min-width: 768px){article.is-youtube-video .reader-title{font-size:28px !important}}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:auto;margin-top:25%;padding:72px 0;border-radius:16px;background-color:var(--wh-bg-base);box-shadow:var(--wh-shadow)}.empty-state-content{display:flex;flex-direction:column;align-items:center;gap:4px;text-align:center;max-width:300px}.empty-state-content .empty-state-icon{color:var(--wh-text-strongest) !important;opacity:.6 !important;transition:all .3s ease-in-out !important;filter:drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1)) !important}.empty-state-content h2{font-size:18px !important;margin:0 !important;font-weight:500 !important;color:var(--wh-text-light) !important;line-height:1.4 !important;letter-spacing:-0.01em !important;margin-bottom:4px !important}.empty-state-content h2{font-feature-settings:"liga" 1,"kern" 1}.empty-state-content p{font-size:14px !important;margin:0 !important;line-height:1.5 !important;color:var(--wh-text-lightest) !important}.empty-state-content a{color:var(--wh-text-lightest) !important;text-decoration:underline !important}.empty-state-content a:hover{color:var(--wh-text-light) !important}.empty-state-content .empty-state-btn{margin-top:12px !important}',""]);const s=a},36758:t=>{"use strict";t.exports=function(t){return t[1]}},36774:(t,e,i)=>{"use strict";i.d(e,{YZ:()=>o.YZ});var o=i(57929)},38085:t=>{"use strict";t.exports=WebHighlightsSharedLibExternal},38163:(t,e,i)=>{"use strict";i.d(e,{_:()=>o._});var o=i(41329)},40429:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});var o=i(36758),r=i.n(o),n=i(40935),a=i.n(n)()(r());a.push([t.id,"#youtube-player-container{display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center;background:var(--wh-bg-back);background:var(--wh-reader-bg-color, var(--wh-bg-back));border-radius:8px}#youtube-player-container.sticky{position:sticky;top:0;z-index:1}#youtube-player{border-radius:8px}#youtube-player.hidden{display:none}",""]);const s=a},40935:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i="",o=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),o&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),o&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i}).join("")},e.i=function(t,i,o,r,n){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var d=0;d<t.length;d++){var c=[].concat(t[d]);o&&a[c[0]]||(void 0!==n&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=n),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),e.push(c))}},e}},41329:(t,e,i)=>{"use strict";i.d(e,{_:()=>a});var o=i(80181),r=i(16655);class n extends r.WL{constructor(t){if(super(t),this.it=o.s6,t.type!==r.OA.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===o.s6||null==t)return this._t=void 0,this.it=t;if(t===o.c0)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}}n.directiveName="unsafeHTML",n.resultType=1;const a=(0,r.u$)(n)},43715:(t,e,i)=>{var o=i(16886);o&&o.__esModule&&(o=o.default),t.exports="string"==typeof o?o:o.toString()},45868:(t,e,i)=>{var o=i(40429);o&&o.__esModule&&(o=o.default),t.exports="string"==typeof o?o:o.toString()},56650:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});var o=i(36758),r=i.n(o),n=i(40935),a=i.n(n)()(r());a.push([t.id,'.wh-loading-skeleton{color:rgba(0,0,0,0);opacity:.8;animation:1.25s linear 0s infinite normal none running loadingBlinking;background:var(--wh-skeleton-bg);border-radius:4px;position:relative;overflow:hidden}.wh-loading-skeleton::after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, var(--wh-skeleton-bg-hover), transparent);animation:skeleton-shimmer 2s infinite}@keyframes loadingBlinking{0%{background:var(--wh-skeleton-bg)}70%{background:var(--wh-skeleton-bg-hover)}100%{background:var(--wh-skeleton-bg-strong)}}@keyframes skeleton-shimmer{0%{left:-100%}100%{left:100%}}.flex{display:flex}.flex-0{flex:0}.flex-1{flex:1}.flex-col{flex-direction:column}@media screen and (min-width: 768px){.sm\\:flex-row{flex-direction:row}}@media screen and (min-width: 768px){.md\\:flex-row{flex-direction:row}}@media screen and (min-width: 1024px){.lg\\:flex-row{flex-direction:row}}.flex-center{justify-content:center;align-items:center}.items-center{align-items:center}.items-end{align-items:flex-end}.items-start{align-items:flex-start}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-end{justify-content:flex-end}.justify-start{justify-content:flex-start}.flex-wrap{flex-wrap:wrap}.m-0{margin:0}.p-0{padding:0}.m-1{margin:4px}.m-2{margin:8px}.m-3{margin:12px}.m-4{margin:16px}.m-5{margin:20px}.mt-0{margin-top:0}.mt-0\\.5{margin-top:2px}.mt-1{margin-top:4px}.mt-2{margin-top:8px}.mt-3{margin-top:12px}.mt-4{margin-top:16px}.mt-5{margin-top:20px}.mt-8{margin-top:32px}.my-8{margin-top:32px;margin-bottom:32px}.mb-0{margin-bottom:0}.mb-1{margin-bottom:4px}.mb-2{margin-bottom:8px}.mb-3{margin-bottom:12px}.mb-4{margin-bottom:16px}.mb-5{margin-bottom:20px}.mb-8{margin-bottom:32px}.ml-0{margin-left:0}.ml-1{margin-left:4px}.ml-2{margin-left:8px}.ml-3{margin-left:12px}.ml-4{margin-left:16px}.ml-5{margin-left:20px}.mr-0{margin-right:0}.mr-1{margin-right:4px}.mr-2{margin-right:8px}.mr-3{margin-right:12px}.mr-4{margin-right:16px}.mr-5{margin-right:20px}.p-0{padding:0}.p-1{padding:4px}.p-2{padding:8px}.p-3{padding:12px}.p-4{padding:16px}.p-5{padding:20px}.pt-0{padding-top:0}.pt-1{padding-top:4px}.pt-2{padding-top:8px}.pt-3{padding-top:12px}.pt-4{padding-top:16px}.pt-5{padding-top:20px}.pb-0{padding-bottom:0}.pb-1{padding-bottom:4px}.pb-2{padding-bottom:8px}.pb-3{padding-bottom:12px}.pb-4{padding-bottom:16px}.pb-5{padding-bottom:20px}.pl-0{padding-left:0}.pl-1{padding-left:4px}.pl-2{padding-left:8px}.pl-3{padding-left:12px}.pl-4{padding-left:16px}.pl-5{padding-left:20px}.pr-0{padding-right:0}.pr-1{padding-right:4px}.pr-2{padding-right:8px}.pr-3{padding-right:12px}.pr-4{padding-right:16px}.pr-5{padding-right:20px}.my-0{margin-top:0;margin-bottom:0}.my-1{margin-top:4px;margin-bottom:4px}.my-2{margin-top:8px;margin-bottom:8px}.my-3{margin-top:12px;margin-bottom:12px}.my-4{margin-top:16px;margin-bottom:16px}.my-5{margin-top:20px;margin-bottom:20px}.mx-auto{margin-left:auto;margin-right:auto}.my-auto{margin-top:auto;margin-bottom:auto}.m-auto{margin:auto}.mx-2{margin-left:8px;margin-right:8px}.mx-4{margin-left:16px;margin-right:16px}.mx-8{margin-left:32px;margin-right:32px}.py-0{padding-top:0;padding-bottom:0}.py-1{padding-top:4px;padding-bottom:4px}.py-2{padding-top:8px;padding-bottom:8px}.py-3{padding-top:12px;padding-bottom:12px}.py-4{padding-top:16px;padding-bottom:16px}.py-5{padding-top:20px;padding-bottom:20px}.px-0{padding-left:0;padding-right:0}.px-1{padding-left:4px;padding-right:4px}.px-2{padding-left:8px;padding-right:8px}.px-3{padding-left:12px;padding-right:12px}.px-4{padding-left:16px;padding-right:16px}.px-5{padding-left:20px;padding-right:20px}.grid{display:grid}@media screen and (min-width: 768px){.sm-grid{display:grid}}@media screen and (min-width: 1024px){.md-grid{display:grid}}@media screen and (min-width: 1280px){.lg-grid{display:grid}}.grid-cols-2{grid-template-columns:repeat(2, 1fr)}.grid-cols-3{grid-template-columns:repeat(3, 1fr)}.grid-cols-4{grid-template-columns:repeat(4, 1fr)}.grid-cols-6{grid-template-columns:repeat(6, 1fr)}.grid-cols-12{grid-template-columns:repeat(12, 1fr)}@media screen and (min-width: 768px){.sm-grid-cols-2{grid-template-columns:repeat(2, 1fr)}.sm-grid-cols-3{grid-template-columns:repeat(3, 1fr)}.sm-grid-cols-4{grid-template-columns:repeat(4, 1fr)}.sm-grid-cols-6{grid-template-columns:repeat(6, 1fr)}.sm-grid-cols-12{grid-template-columns:repeat(12, 1fr)}}@media screen and (min-width: 1024px){.md-grid-cols-2{grid-template-columns:repeat(2, 1fr)}.md-grid-cols-3{grid-template-columns:repeat(3, 1fr)}.md-grid-cols-4{grid-template-columns:repeat(4, 1fr)}.md-grid-cols-6{grid-template-columns:repeat(6, 1fr)}.md-grid-cols-12{grid-template-columns:repeat(12, 1fr)}}@media screen and (min-width: 1280px){.lg-grid-cols-2{grid-template-columns:repeat(2, 1fr)}.lg-grid-cols-3{grid-template-columns:repeat(3, 1fr)}.lg-grid-cols-4{grid-template-columns:repeat(4, 1fr)}.lg-grid-cols-6{grid-template-columns:repeat(6, 1fr)}.lg-grid-cols-12{grid-template-columns:repeat(12, 1fr)}}.gap-1{gap:4px}.gap-2{gap:8px}.gap-3{gap:12px}.gap-4{gap:16px}.gap-5{gap:20px}.gap-8{gap:32px}@media screen and (min-width: 768px){.sm-gap-1{gap:4px}.sm-gap-2{gap:8px}.sm-gap-3{gap:12px}.sm-gap-4{gap:16px}.sm-gap-5{gap:20px}}@media screen and (min-width: 1024px){.md-gap-1{gap:4px}.md-gap-2{gap:8px}.md-gap-3{gap:12px}.md-gap-4{gap:16px}.md-gap-5{gap:20px}}@media screen and (min-width: 1280px){.lg-gap-1{gap:4px}.lg-gap-2{gap:8px}.lg-gap-3{gap:12px}.lg-gap-4{gap:16px}.lg-gap-5{gap:20px}}.grid-flow-row{grid-auto-flow:row}.grid-flow-col{grid-auto-flow:column}.col-span-1{grid-column:span 1/span 1}.col-span-2{grid-column:span 2/span 2}.col-span-3{grid-column:span 3/span 3}.col-span-4{grid-column:span 4/span 4}.col-span-6{grid-column:span 6/span 6}.col-span-8{grid-column:span 8/span 8}.col-span-12{grid-column:span 12/span 12}@media screen and (min-width: 768px){.sm-col-span-1{grid-column:span 1/span 1}.sm-col-span-2{grid-column:span 2/span 2}.sm-col-span-3{grid-column:span 3/span 3}.sm-col-span-4{grid-column:span 4/span 4}.sm-col-span-6{grid-column:span 6/span 6}.sm-col-span-8{grid-column:span 8/span 8}.sm-col-span-12{grid-column:span 12/span 12}}@media screen and (min-width: 1024px){.md-col-span-1{grid-column:span 1/span 1}.md-col-span-2{grid-column:span 2/span 2}.md-col-span-3{grid-column:span 3/span 3}.md-col-span-4{grid-column:span 4/span 4}.md-col-span-6{grid-column:span 6/span 6}.md-col-span-8{grid-column:span 8/span 8}.md-col-span-12{grid-column:span 12/span 12}}@media screen and (min-width: 1280px){.lg-col-span-1{grid-column:span 1/span 1}.lg-col-span-2{grid-column:span 2/span 2}.lg-col-span-3{grid-column:span 3/span 3}.lg-col-span-4{grid-column:span 4/span 4}.lg-col-span-6{grid-column:span 6/span 6}.lg-col-span-8{grid-column:span 8/span 8}.lg-col-span-12{grid-column:span 12/span 12}}.text-xs{font-size:10px}.text-sm{font-size:12px}.text-md{font-size:16px}.text-lg{font-size:20px}.text-xl{font-size:24px}.text-2xl{font-size:32px}.text-light{color:var(--wh-text-light)}.text-lighter{color:var(--wh-text-lighter)}.text-lightest{color:var(--wh-text-lightest)}.text-strong{color:var(--wh-text-strong)}.text-stronger{color:var(--wh-text-stronger)}.text-strongest{color:var(--wh-text-strongest)}.text-hover{color:var(--wh-text-hover)}.text{color:var(--wh-text)}.w-full{width:100%}.h-full{height:100%}.w-fit{width:-moz-fit-content;width:fit-content}@media screen and (min-width: 768px){.sm-w-full{width:100%}}@media screen and (min-width: 768px){.sm-w-fit{width:-moz-fit-content;width:fit-content}}[dir="ltr"] .text-start{text-align:left}[dir="rtl"] .text-start{text-align:right}[dir="ltr"] .text-end{text-align:right}[dir="rtl"] .text-end{text-align:left}.text-center{text-align:center}.no-wrap{white-space:nowrap}.cursor-pointer{cursor:pointer}.shadow{box-shadow:0 2px 8px rgba(0,0,0,.08)}.border{border:1px solid var(--wh-border-base)}.border:hover{border-color:var(--wh-border-base-hover)}.border-strong{border:1px solid var(--wh-border-base-strong)}.border-strong:hover{border-color:var(--wh-border-base-strong-hover)}.border-none{border:none}.border-white{border-color:#fff}.border-gray-300{border-color:#d1d5db}.rounded{border-radius:4px}.rounded-md{border-radius:8px}.rounded-lg{border-radius:12px}.overflow-hidden{overflow:hidden}.overflow-auto{overflow:auto}@media(min-width: 600px){.overflow-auto::-webkit-scrollbar-track{background:var(--wh-bg-front-strong)}.overflow-auto::-webkit-scrollbar-thumb{background:var(--wh-border-front-strong);box-shadow:var(--wh-shadow);border-radius:10px}.overflow-auto::-webkit-scrollbar-thumb:hover{background:var(--wh-border-front-strong)}}.btn-no-style{border:none;background:none;cursor:pointer}.ml-auto{margin-left:auto}.mr-auto{margin-right:auto}.mt-auto{margin-top:auto}.mb-auto{margin-bottom:auto}.order-0{order:0}.order-1{order:1}.order-2{order:2}@media screen and (min-width: 768px){.sm\\:order-0{order:0}}@media screen and (min-width: 768px){.sm\\:order-1{order:1}}@media screen and (min-width: 768px){.sm\\:order-2{order:2}}@media screen and (min-width: 1024px){.md\\:order-0{order:0}}@media screen and (min-width: 1024px){.md\\:order-1{order:1}}@media screen and (min-width: 1024px){.md\\:order-2{order:2}}@media screen and (min-width: 1280px){.lg\\:order-0{order:0}}@media screen and (min-width: 1280px){.lg\\:order-1{order:1}}@media screen and (min-width: 1280px){.lg\\:order-2{order:2}}.block{display:block}.text-center{text-align:center}.font-bold{font-weight:600}.font-semibold{font-weight:500}.box-border{box-sizing:border-box}.relative{position:relative}.overflow-hidden{overflow:hidden}.text-ellipsis{text-overflow:ellipsis}.max-w-screen-sm{max-width:640px}.max-w-screen-md{max-width:768px}.max-w-screen-lg{max-width:1024px}.max-w-screen-xl{max-width:1280px}.max-w-screen-2xl{max-width:1536px}.font-extrabold{font-weight:800}.tracking-wide{letter-spacing:.05em}.text-3xl{font-size:40px}.rounded-full{border-radius:50%}.border-b-2{border-bottom:2px solid #ccc}.bg-white{background:#fff}.absolute{position:absolute}.top-5{top:20px}.right-5{right:20px}.w-12{width:48px}.h-12{height:48px}.object-cover{-o-object-fit:cover;object-fit:cover}.h-screen{height:100vh}.w-screen{width:100vw}.min-h-screen{min-height:100vh}.overflow-hidden{overflow:hidden}.text-black{color:#000}.text-2xl{font-size:32px}.text-base{font-size:18px}.font-normal{font-weight:400}.font-medium{font-weight:500}.leading-tight{line-height:1.15}.leading-normal{line-height:1.5}.gap-8{gap:32px}.gap-12{gap:48px}.gap-20{gap:80px}.p-8{padding:32px}.p-12{padding:48px}.p-20{padding:80px}.rounded-xl{border-radius:16px}.bg-opacity-95{background-color:rgba(255,255,255,.95)}.min-w-\\[260px\\]{min-width:260px}.max-w-xs{max-width:20rem}.p-6{padding:24px}.px-3{padding-left:12px;padding-right:12px}.py-1{padding-top:4px;padding-bottom:4px}.self-end{align-self:flex-end}.rounded-xl{border-radius:16px}.shadow{box-shadow:0 2px 8px rgba(0,0,0,.08)}.bg-gray-100{background:var(--wh-gray-100)}.text-xs{font-size:12px}.font-medium{font-weight:500}.text-white{color:#fff}.text-gray-50{color:var(--wh-gray-50)}.text-gray-100{color:var(--wh-gray-100)}.text-gray-200{color:var(--wh-gray-200)}.text-gray-300{color:var(--wh-gray-300)}.text-gray-400{color:var(--wh-gray-400)}.text-gray-500{color:var(--wh-gray-500)}.text-gray-600{color:var(--wh-gray-600)}.text-gray-700{color:var(--wh-gray-700)}.text-gray-800{color:var(--wh-gray-800)}.text-gray-900{color:var(--wh-gray-900)}.text-gray-950{color:var(--wh-gray-950)}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.w-4{width:16px}.h-4{height:16px}.w-6{width:24px}.h-6{height:24px}.w-8{width:32px}.h-8{height:32px}.w-10{width:40px}.h-10{height:40px}:host{display:flex;flex-direction:column;gap:10px;background-color:#ffffff;background-color:var(--wh-reader-bg-color, #ffffff);padding:4px;border-radius:4px;text-align:center;row-gap:4px;transition:all .2s ease;opacity:1;z-index:2;--wh-reader-controls-shadow: inset 0 0 0.5px 1px hsla(0, 0%, 100%, 0.075), /* shadow ring ðŸ‘‡ */ 0 0 0 1px hsla(0, 0%, 0%, 0.05), /* multiple soft shadows ðŸ‘‡ */ 0 0.3px 0.4px hsla(0, 0%, 0%, 0.02), 0 0.9px 1.5px hsla(0, 0%, 0%, 0.045), 0 3.5px 6px hsla(0, 0%, 0%, 0.09);box-shadow:var(--wh-reader-controls-shadow);color:#333333;color:var(--wh-reader-color, #333333);fill:#333333;fill:var(--wh-reader-color, #333333)}:host(.scrolled:not(:hover):not(.active)){opacity:.7;box-shadow:none}button{background-color:rgba(0,0,0,0);border:none;cursor:default;padding:0;color:#333333;color:var(--wh-reader-color, #333333);fill:#333333;fill:var(--wh-reader-color, #333333);border-radius:4px;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease}button:hover,button.active{background-color:#f5f5f5;background-color:var(--wh-reader-bg-color-hover, #f5f5f5)}.main-control-btn{width:32px;height:32px;background-color:#ffffff;background-color:var(--wh-reader-bg-color, #ffffff);position:relative}.main-control-btn.toggle-sidebar-btn{color:var(--wh-primary-600);fill:var(--wh-primary-600)}.control-dropdown-list{list-style:none;padding:0;margin:0;position:relative}.control-dropdown{position:absolute;top:0;visibility:hidden;background-color:#ffffff;background-color:var(--wh-reader-bg-color, #ffffff);border-radius:4px;box-shadow:var(--wh-reader-controls-shadow);padding:4px;width:100px;display:flex;flex-direction:column;row-gap:4px}.control-dropdown.open{visibility:visible}.control-dropdown-item{display:flex;align-items:center;justify-content:center;gap:4px;list-style:none;border-radius:4px;transition:background-color .2s ease;width:100%;flex:1;gap:8px;justify-content:flex-start;padding:4px 8px}.control-dropdown-item:hover{background-color:#f5f5f5;background-color:var(--wh-reader-bg-color-hover, #f5f5f5)}.control-dropdown-item.active{outline:1px solid var(--wh-primary-600)}.control-dropdown-layout-section{display:flex;align-items:center;justify-content:space-between;gap:4px;padding:0 4px}.control-dropdown-layout-section .control-dropdown-layout-section-entry{display:flex;align-items:center;justify-content:center;gap:4px}.control-dropdown-layout-section .control-dropdown-layout-section-entry button{padding:4px}',""]);const s=a},57929:(t,e,i)=>{"use strict";i.d(e,{YZ:()=>n});var o=i(58207);const r=Symbol();class n{get taskComplete(){return this.t||(1===this.i?this.t=new Promise((t,e)=>{this.o=t,this.h=e}):3===this.i?this.t=Promise.reject(this.l):this.t=Promise.resolve(this.u)),this.t}constructor(t,e,i){this.p=0,this.i=0,(this._=t).addController(this);const o="object"==typeof e?e:{task:e,args:i};this.v=o.task,this.j=o.args,this.m=o.argsEqual??a,this.k=o.onComplete,this.A=o.onError,this.autoRun=o.autoRun??!0,"initialValue"in o&&(this.u=o.initialValue,this.i=2,this.O=this.T?.())}hostUpdate(){!0===this.autoRun&&this.S()}hostUpdated(){"afterUpdate"===this.autoRun&&this.S()}T(){if(void 0===this.j)return;const t=this.j();if(!Array.isArray(t))throw Error("The args function must return an array");return t}async S(){const t=this.T(),e=this.O;this.O=t,t===e||void 0===t||void 0!==e&&this.m(e,t)||await this.run(t)}async run(t){let e,i;t??=this.T(),this.O=t,1===this.i?this.q?.abort():(this.t=void 0,this.o=void 0,this.h=void 0),this.i=1,"afterUpdate"===this.autoRun?queueMicrotask(()=>this._.requestUpdate()):this._.requestUpdate();const o=++this.p;this.q=new AbortController;let n=!1;try{e=await this.v(t,{signal:this.q.signal})}catch(t){n=!0,i=t}if(this.p===o){if(e===r)this.i=0;else{if(!1===n){try{this.k?.(e)}catch{}this.i=2,this.o?.(e)}else{try{this.A?.(i)}catch{}this.i=3,this.h?.(i)}this.u=e,this.l=i}this._.requestUpdate()}}abort(t){1===this.i&&this.q?.abort(t)}get value(){return this.u}get error(){return this.l}get status(){return this.i}render(t){switch(this.i){case 0:return t.initial?.();case 1:return t.pending?.();case 2:return t.complete?.(this.value);case 3:return t.error?.(this.error);default:throw Error("Unexpected status: "+this.i)}}}const a=(t,e)=>t===e||t.length===e.length&&t.every((t,i)=>!(0,o.Ec)(t,e[i]))},58207:(t,e,i)=>{"use strict";i.d(e,{Ec:()=>f});var o=i(86663);const{is:r,defineProperty:n,getOwnPropertyDescriptor:a,getOwnPropertyNames:s,getOwnPropertySymbols:l,getPrototypeOf:d}=Object,c=globalThis,p=c.trustedTypes,h=p?p.emptyScript:"",u=c.reactiveElementPolyfillSupport,g=(t,e)=>t,m={toAttribute(t,e){switch(e){case Boolean:t=t?h:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,e)=>!r(t,e),b={attribute:!0,type:String,converter:m,reflect:!1,useDefault:!1,hasChanged:f};Symbol.metadata??=Symbol("metadata"),c.litPropertyMetadata??=new WeakMap;class y extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=b){if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(t,e),!e.noAccessor){const i=Symbol(),o=this.getPropertyDescriptor(t,i,e);void 0!==o&&n(this.prototype,t,o)}}static getPropertyDescriptor(t,e,i){const{get:o,set:r}=a(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get:o,set(e){const n=o?.call(this);r?.call(this,e),this.requestUpdate(t,n,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??b}static _$Ei(){if(this.hasOwnProperty(g("elementProperties")))return;const t=d(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(g("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(g("properties"))){const t=this.properties,e=[...s(t),...l(t)];for(const i of e)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,i]of e)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift((0,o.sk)(t))}else void 0!==t&&e.push((0,o.sk)(t));return e}static _$Eu(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return(0,o.Rf)(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$ET(t,e){const i=this.constructor.elementProperties.get(t),o=this.constructor._$Eu(t,i);if(void 0!==o&&!0===i.reflect){const r=(void 0!==i.converter?.toAttribute?i.converter:m).toAttribute(e,i.type);this._$Em=t,null==r?this.removeAttribute(o):this.setAttribute(o,r),this._$Em=null}}_$AK(t,e){const i=this.constructor,o=i._$Eh.get(t);if(void 0!==o&&this._$Em!==o){const t=i.getPropertyOptions(o),r="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:m;this._$Em=o;const n=r.fromAttribute(e,t.type);this[o]=n??this._$Ej?.get(o)??n,this._$Em=null}}requestUpdate(t,e,i){if(void 0!==t){const o=this.constructor,r=this[t];if(i??=o.getPropertyOptions(t),!((i.hasChanged??f)(r,e)||i.useDefault&&i.reflect&&r===this._$Ej?.get(t)&&!this.hasAttribute(o._$Eu(t,i))))return;this.C(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,e,{useDefault:i,reflect:o,wrapped:r},n){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,n??e??this[t]),!0!==r||void 0!==n)||(this._$AL.has(t)||(this.hasUpdated||i||(e=void 0),this._$AL.set(t,e)),!0===o&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,i]of t){const{wrapped:t}=i,o=this[e];!0!==t||this._$AL.has(e)||void 0===o||this.C(e,void 0,i,o)}}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(e)):this._$EM()}catch(e){throw t=!1,this._$EM(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}}y.elementStyles=[],y.shadowRootOptions={mode:"open"},y[g("elementProperties")]=new Map,y[g("finalized")]=new Map,u?.({ReactiveElement:y}),(c.reactiveElementVersions??=[]).push("2.1.1")},59859:(t,e,i)=>{"use strict";var o=i(38085),r=i(93811),n=i(95665),a=i(30827),s=i(45868),l=i.n(s),d=function(t,e,i,o){var r,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a},c=function(t,e,i,o){return new(i||(i=Promise))(function(r,n){function a(t){try{l(o.next(t))}catch(t){n(t)}}function s(t){try{l(o.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}l((o=o.apply(t,e||[])).next())})};o.SHARED_COMPONENTS_INTERNAL.YoutubePlayer;const p="webhighlights-youtube-player";(new CSSStyleSheet).replaceSync(l());const h="youtube-player";class u extends a.y{constructor(){super(...arguments),this.components=[o.SHARED_COMPONENTS.Skeleton.TAG],this.youtubeUrl="",this.disableStickyPlayer=!1,this.currentTime=0,this.progress=0,this.isPlayerReady=!1,this.youtubeOptions=o.fallbackYoutubeOptions,this.intervalId=null,this.bridgeListener=t=>{const e=t.data;if(!e||"yt:event"!==e.type)return;const i=e;if("ready"===i.name)return this.isPlayerReady=!0,void o.notifications.dispatch("youtubePlayerStateChanged",{detail:{playerState:"unstarted",playerHeight:i.payload.playerHeight||0}});if("state"===i.name){const t=i.payload.playerState,e=i.payload.playerHeight||0;return void o.notifications.dispatch("youtubePlayerStateChanged",{detail:{playerState:t,playerHeight:e}})}return"time"===i.name?(this.currentTime="number"==typeof i.payload.currentTime?i.payload.currentTime:this.currentTime,this.progress="number"==typeof i.payload.progress?i.payload.progress:this.progress,void o.notifications.dispatch("youtubePlayerTimeChanged",{detail:{currentTime:this.currentTime,progress:this.progress}})):void 0}}createRenderRoot(){return this}firstUpdated(){return c(this,void 0,void 0,function*(){this.loadData(),this.initBridge(),this.startListeners()})}loadData(){return c(this,void 0,void 0,function*(){var t;const e=yield(0,o.useContext)().db.getChromeSettings();this.youtubeOptions=null!==(t=e.youtubeOptions)&&void 0!==t?t:o.fallbackYoutubeOptions})}get bridgeOrigin(){return(0,o.useContext)().environment.production?(0,o.useContext)().environment.WEBSITE_URL:(0,o.useContext)().environment.FRONTEND_URL}get bridgeBaseUrl(){return`${this.bridgeOrigin}/yt-embed.html`}startListeners(){this.subscriptions=[o.notifications.subscribe("youtubePlayerAction",this.onYoutubePlayerAction.bind(this)),o.notifications.subscribe("updatedChromeSettings",this.onUpdateChromeSettings.bind(this))]}onUpdateChromeSettings(t){var e;this.youtubeOptions=null!==(e=t.detail.youtubeOptions)&&void 0!==e?e:o.fallbackYoutubeOptions}updated(t){if(t.has("youtubeUrl")&&this.youtubeUrl){this.isPlayerReady=!1;const t=(0,o.getYoutubeVideoId)(this.youtubeUrl);this.updateBridgeSrc(null!=t?t:"")}}disconnectedCallback(){this.clearInterval(),super.disconnectedCallback()}onYoutubePlayerAction(t){"pause"!==t.detail.type?"play"!==t.detail.type?this.postBridgeCommand({type:"yt:cmd",name:"pause"}):"number"==typeof t.detail.timeToPlayAt?this.postBridgeCommand({type:"yt:cmd",name:"play",payload:{timeToPlayAt:t.detail.timeToPlayAt}}):this.postBridgeCommand({type:"yt:cmd",name:"play"}):this.postBridgeCommand({type:"yt:cmd",name:"pause"})}clearInterval(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}render(){const t=(0,o.isMobile)(),e=(0,o.getYoutubeVideoId)(this.youtubeUrl)||"",i=`${this.bridgeBaseUrl}?videoId=${encodeURIComponent(e)}&autoplay=0&mute=0&start=0`;return r.html`
      <style>
        ${p} {
          position: relative;
        }
        ${l()}
      </style>
      <div
        id="youtube-player-container"
        class="${this.youtubeOptions.enableStickyPlayer&&!this.disableStickyPlayer?"sticky":""}"
      >
        ${this.isPlayerReady?r.html``:r.html`
              <webhighlights-skeleton
                class="youtube-skeleton"
                style="width: ${t?"100vw":"100%"}; height: 315px; max-width: 100vw;"
              ></webhighlights-skeleton>
            `}
        <iframe
          id="${h}"
          src="${i}"
          class="${this.isPlayerReady?"":"hidden"}"
          referrerpolicy="strict-origin-when-cross-origin"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen
          style="width: 100%; height: 315px; border: 0;"
        ></iframe>
      </div>
    `}initBridge(){window.addEventListener("message",this.bridgeListener);const t=(0,o.getYoutubeVideoId)(this.youtubeUrl)||"";this.updateBridgeSrc(t)}updateBridgeSrc(t){const e=document.getElementById(h),i=`${this.bridgeBaseUrl}?videoId=${encodeURIComponent(t)}&autoplay=0&mute=0&start=0`;e&&e.src!==i&&(e.src=i)}postBridgeCommand(t){const e=document.getElementById(h);e&&e.contentWindow&&e.contentWindow.postMessage(t,this.bridgeOrigin)}}d([(0,n.property)({type:String})],u.prototype,"youtubeUrl",void 0),d([(0,n.property)()],u.prototype,"disableStickyPlayer",void 0),d([(0,n.state)()],u.prototype,"currentTime",void 0),d([(0,n.state)()],u.prototype,"progress",void 0),d([(0,n.state)()],u.prototype,"isPlayerReady",void 0),d([(0,n.state)()],u.prototype,"youtubeOptions",void 0),a.y.define(p,u)},67810:(t,e,i)=>{"use strict";var o=i(36774),r=i(38085),n=i(93811),a=i(95665),s=i(30827),l=i(33331),d=(i(59859),i(78524),i(27954)),c=i.n(d),p=function(t,e,i,o){var r,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a},h=function(t,e,i,o){return new(i||(i=Promise))(function(r,n){function a(t){try{l(o.next(t))}catch(t){n(t)}}function s(t){try{l(o.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}l((o=o.apply(t,e||[])).next())})};r.SHARED_COMPONENTS_INTERNAL.ReaderContent,(new CSSStyleSheet).replaceSync(c());class u extends s.y{constructor(){super(...arguments),this.pageContent=null,this.currentUrl=null,this.components=[r.SHARED_COMPONENTS.Loading.TAG],this._loadPageContent=new o.YZ(this,{task:t=>h(this,[t],void 0,function*([]){var t,e;r.notifications.dispatch("readerContentUpdating",{detail:{}});const{httpFacade:i}=(0,r.useContext)(),o=this.currentUrl;if(o)try{const[n,a,s]=yield Promise.allSettled([this.loadPageContent(o),i.getMetaData(o),(0,r.loadBookmarkForCurrentPage)()]),l=(0,r.unwrapSettledPromise)(n,null),d=(0,r.unwrapSettledPromise)(a,{}),c=(0,r.unwrapSettledPromise)(s,null),p={title:(null==c?void 0:c.title)||(null==d?void 0:d.title)||(null==l?void 0:l.title),description:(null==c?void 0:c.description)||(null==d?void 0:d.description)||(null==l?void 0:l.description),image:(null===(t=null==c?void 0:c.meta)||void 0===t?void 0:t.image)||(null==d?void 0:d.image)||{url:"",type:"",alt:"Empty thumbnail image"},url:(null==c?void 0:c.url)||(null==d?void 0:d.url),favicon:(null===(e=null==c?void 0:c.meta)||void 0===e?void 0:e.favicon)||(null==d?void 0:d.favicon)};return(0,r.setMetaDataForReader)({url:o,title:p.title,description:p.description,image:p.image,favicon:p.favicon}),l}catch(t){return console.error("Error loading page content",t),null}finally{setTimeout(()=>{this.dispatchEvent(new CustomEvent("ready")),r.notifications.dispatch("readerContentReady",{detail:{}}),this.querySelectorAll("a").forEach(t=>{t.setAttribute("target","_blank")})},0)}}),args:()=>[this.currentUrl]})}createRenderRoot(){return this}firstUpdated(t){this.initListener(),this.loadInitialUrl()}initListener(){this.subscriptions=[r.notifications.subscribe("openInReader",this.onUpdatedReader.bind(this))]}onUpdatedReader(t){const e=t.detail[0].url;if(e)return this.currentUrl=e,void(0,r.setSearchParamInUrl)(r.READER_QUERY_PARAMS.url,encodeURIComponent(e))}onAddContent(){(0,r.onAddContentFromReader)()}loadInitialUrl(){return h(this,void 0,void 0,function*(){this.currentUrl=(0,r.getDecodedReaderUrlFromParams)()})}loadPageContent(t){return h(this,void 0,void 0,function*(){const e=(0,r.getDecodedPageContentFromParams)(),i=yield(0,r.getPageContentResult)({url:t,isUrlCrawlEnabled:!e});if(null==i?void 0:i.pageContent)return i.pageContent;if(e){const t=(0,r.getBookmarkFromPageContent)(e,"text");return yield(0,r.addBookmark)(t),yield(0,r.createOrUpdatePageContent)(e),e}return null})}render(){return n.html`
      <style>
        ${c()}
      </style>
      <div id="reader">
        ${this._loadPageContent.render({pending:()=>n.html`<webhighlights-loading></webhighlights-loading>`,complete:t=>{var e;const i=(0,r.isYoutubeUrl)(null==t?void 0:t.url);return t?n.html`
                  <article class=${i?"is-youtube-video":""}>
                    ${t.title?n.html`
                          <header>
                            <h1 class="reader-title">${t.title}</h1>
                          </header>
                        `:n.html``}
                    <main>${(0,l.B)(t)}</main>
                  </article>
                `:n.html`<div class="empty-state">
                  <div class="empty-state-content">
                    <webhighlights-icon
                      class="empty-state-icon"
                      strokeWidth="1.5"
                      icon=${r.ICON_NAMES.reader}
                      size="32"
                    ></webhighlights-icon>
                    <h2>No content found</h2>
                    <p>
                      Use our
                      <a
                        href="${null===(e=(0,r.useContextWithCatch)())||void 0===e?void 0:e.environment.WEBSITE_URL}/install"
                        target="_blank"
                        >browser add-on</a
                      >
                      or click the button below to add content.
                    </p>
                    <button
                      class="empty-state-btn primary-btn"
                      @click=${this.onAddContent}
                    >
                      Add content
                    </button>
                  </div>
                </div>`}})}
      </div>
    `}}p([(0,a.state)()],u.prototype,"pageContent",void 0),p([(0,a.state)()],u.prototype,"currentUrl",void 0),s.y.define("webhighlights-reader-content",u)},71595:(t,e,i)=>{var o=i(78558);o&&o.__esModule&&(o=o.default),t.exports="string"==typeof o?o:o.toString()},78524:(t,e,i)=>{"use strict";var o=i(38085),r=i(97519),n=i(93811),a=i(95665),s=i(38163),l=i(30827),d=i(71595),c=i.n(d),p=function(t,e,i,o){var r,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a};const h=o.SHARED_COMPONENTS_INTERNAL.YoutubeTranscript.TAG;(new CSSStyleSheet).replaceSync(c());const u="transcript-marker";class g extends l.y{constructor(){super(...arguments),this.components=[o.SHARED_COMPONENTS.Skeleton.TAG],this.currentVideoTimeInSeconds=0,this.currentYoutubePlayerState="unstarted",this.currentYoutubePlayerHeight=315,this.chromeSettings=o.fallbackChromeSettings}createRenderRoot(){return this}firstUpdated(){this.initListener(),this.loadData()}initListener(){this.subscriptions=[o.notifications.subscribe("youtubePlayerTimeChanged",this.onYoutubePlayerTimeChanged.bind(this)),o.notifications.subscribe("youtubePlayerStateChanged",this.onYoutubePlayerStateChanged.bind(this)),o.notifications.subscribe("updatedChromeSettings",this.onUpdateChromeSettings.bind(this))]}loadData(){return t=this,e=void 0,r=function*(){const t=yield(0,o.useContext)().db.getChromeSettings();this.chromeSettings=t},new((i=void 0)||(i=Promise))(function(o,n){function a(t){try{l(r.next(t))}catch(t){n(t)}}function s(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())});var t,e,i,r}onUpdateChromeSettings(t){var e;this.chromeSettings=Object.assign(Object.assign({},this.chromeSettings),t.detail),(null===(e=this.chromeSettings.youtubeOptions)||void 0===e?void 0:e.enableAutoscrolling)&&this.scrollToActiveTranscriptText()}scrollToActiveTranscriptText(){const t=Array.from(this.getAllTranscriptTexts()).find(t=>t.classList.contains("active"));t&&this.scrollToTranscriptText(t)}getAllTranscriptTexts(){return this.querySelectorAll(`.${u}`)}onYoutubePlayerStateChanged(t){this.currentYoutubePlayerState=t.detail.playerState,this.currentYoutubePlayerHeight=t.detail.playerHeight}scrollToTranscriptText(t){var e;if(!(null===(e=this.chromeSettings.youtubeOptions)||void 0===e?void 0:e.enableAutoscrolling))return;const i=this.chromeSettings.youtubeOptions.enableStickyPlayer?50:100,o=this.chromeSettings.youtubeOptions.enableStickyPlayer?70:100,r=this.chromeSettings.youtubeOptions.enableStickyPlayer?this.currentYoutubePlayerHeight:0,n=r+i,a=window.innerHeight-o,s=window.scrollY,l=t.offsetTop+this.offsetTop-s;(l>a||l<n)&&window.scrollTo({top:t.offsetTop+this.offsetTop-r-i,behavior:"smooth"})}onYoutubePlayerTimeChanged(t){this.currentVideoTimeInSeconds=t.detail.currentTime,this.getAllTranscriptTexts().forEach(t=>{const e=Number(t.getAttribute("data-offset")),i=Number(t.getAttribute("data-duration")),o=e+i<=this.currentVideoTimeInSeconds,r=e<=this.currentVideoTimeInSeconds&&e+i>=this.currentVideoTimeInSeconds;t.classList.remove("active"),t.classList.remove("finished"),o&&t.classList.add("finished"),r&&(t.classList.add("active"),this.scrollToTranscriptText(t))})}get transcriptsWithText(){var t,e,i,o;if(!(null===(t=this.props.pageContent.youtubeTranscript)||void 0===t?void 0:t.transcriptMarkers.length))return[];let r=0;const n=[];for(const t of null!==(i=null===(e=this.props.pageContent.youtubeTranscript)||void 0===e?void 0:e.transcriptMarkers)&&void 0!==i?i:[])n.push(Object.assign(Object.assign({},t),{text:(null===(o=this.props.pageContent.content)||void 0===o?void 0:o.substring(r,r+t.textLength))||""})),r+=t.textLength+1;return n}onTimeMarkerClick(t){this.onPlayVideoFrom(t.offset)}onPlayVideoFrom(t){o.notifications.dispatch("youtubePlayerAction",{detail:{timeToPlayAt:t,type:"play"}})}render(){return this.transcriptsWithText.length?n.html`
      <style>
        ${c()}
      </style>
      <article class="youtube-transcript ${this.currentYoutubePlayerState}">
        ${this.transcriptsWithText.map((t,e)=>{const i=(0,o.secondsToTime)(t.offset);return n.html`<span
              class="time-marker"
              style="z-index: ${this.transcriptsWithText.length-e};"
              data-time="${i}"
              @click=${()=>this.onTimeMarkerClick(t)}
            ></span
            >${(0,s._)(r.A.sanitize(`<span class="${u}" data-offset="${t.offset}" data-duration="${t.duration}">${t.text} </span>`))}`})}
      </article>
    `:n.html``}}p([(0,a.property)({type:Object})],g.prototype,"props",void 0),p([(0,a.state)()],g.prototype,"currentVideoTimeInSeconds",void 0),p([(0,a.state)()],g.prototype,"currentYoutubePlayerState",void 0),p([(0,a.state)()],g.prototype,"currentYoutubePlayerHeight",void 0),p([(0,a.state)()],g.prototype,"chromeSettings",void 0),l.y.define(h,g)},78558:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});var o=i(36758),r=i.n(o),n=i(40935),a=i.n(n)()(r());a.push([t.id,"web-highlight{padding:4px 0}.youtube-transcript{position:relative;padding-top:16px}.youtube-transcript .transcript-marker{color:var(--wh-reader-color);transition:opacity .2s ease-in-out}.youtube-transcript .transcript-marker.finished{background:var(--wh-reader-bg-color-hover);padding:4px 0}.youtube-transcript .transcript-marker.active{background:var(--wh-reader-bg-color-hover);padding:4px 0}.youtube-transcript.playing .transcript-marker{color:var(--wh-reader-color-light)}.youtube-transcript.playing .transcript-marker.finished{opacity:.7}.youtube-transcript.playing .transcript-marker.active{color:var(--wh-reader-color);background:var(--wh-reader-bg-color-hover-strong)}.youtube-transcript .time-marker{position:absolute;left:-50px;transform:translateY(6px);color:rgba(0,0,0,0);font-size:9px;background:rgba(0,0,0,0);padding:4px 8px;border-radius:4px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.youtube-transcript .time-marker::before{content:attr(data-time);position:absolute;top:0;left:0;color:var(--wh-reader-color-lighter);background:var(--wh-reader-bg-color);padding:4px 8px;border-radius:4px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.youtube-transcript .time-marker:hover::before{color:var(--wh-reader-color);background:var(--wh-reader-bg-color-hover)}",""]);const s=a},80181:(t,e,i)=>{"use strict";i.d(e,{c0:()=>_,s6:()=>A});const o=globalThis,r=o.trustedTypes,n=r?r.createPolicy("lit-html",{createHTML:t=>t}):void 0,a="$lit$",s=`lit$${Math.random().toFixed(9).slice(2)}$`,l="?"+s,d=`<${l}>`,c=document,p=()=>c.createComment(""),h=t=>null===t||"object"!=typeof t&&"function"!=typeof t,u=Array.isArray,g="[ \t\n\f\r]",m=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,f=/-->/g,b=/>/g,y=RegExp(`>|${g}(?:([^\\s"'>=/]+)(${g}*=${g}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),x=/'/g,v=/"/g,w=/^(?:script|style|textarea|title)$/i,S=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),_=(S(1),S(2),S(3),Symbol.for("lit-noChange")),A=Symbol.for("lit-nothing"),T=new WeakMap,E=c.createTreeWalker(c,129);function k(t,e){if(!u(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==n?n.createHTML(e):e}const $=(t,e)=>{const i=t.length-1,o=[];let r,n=2===e?"<svg>":3===e?"<math>":"",l=m;for(let e=0;e<i;e++){const i=t[e];let c,p,h=-1,u=0;for(;u<i.length&&(l.lastIndex=u,p=l.exec(i),null!==p);)u=l.lastIndex,l===m?"!--"===p[1]?l=f:void 0!==p[1]?l=b:void 0!==p[2]?(w.test(p[2])&&(r=RegExp("</"+p[2],"g")),l=y):void 0!==p[3]&&(l=y):l===y?">"===p[0]?(l=r??m,h=-1):void 0===p[1]?h=-2:(h=l.lastIndex-p[2].length,c=p[1],l=void 0===p[3]?y:'"'===p[3]?v:x):l===v||l===x?l=y:l===f||l===b?l=m:(l=y,r=void 0);const g=l===y&&t[e+1].startsWith("/>")?" ":"";n+=l===m?i+d:h>=0?(o.push(c),i.slice(0,h)+a+i.slice(h)+s+g):i+s+(-2===h?e:g)}return[k(t,n+(t[i]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),o]};class C{constructor({strings:t,_$litType$:e},i){let o;this.parts=[];let n=0,d=0;const c=t.length-1,h=this.parts,[u,g]=$(t,e);if(this.el=C.createElement(u,i),E.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(o=E.nextNode())&&h.length<c;){if(1===o.nodeType){if(o.hasAttributes())for(const t of o.getAttributeNames())if(t.endsWith(a)){const e=g[d++],i=o.getAttribute(t).split(s),r=/([.?@])?(.*)/.exec(e);h.push({type:1,index:n,name:r[2],strings:i,ctor:"."===r[1]?M:"?"===r[1]?I:"@"===r[1]?D:P}),o.removeAttribute(t)}else t.startsWith(s)&&(h.push({type:6,index:n}),o.removeAttribute(t));if(w.test(o.tagName)){const t=o.textContent.split(s),e=t.length-1;if(e>0){o.textContent=r?r.emptyScript:"";for(let i=0;i<e;i++)o.append(t[i],p()),E.nextNode(),h.push({type:2,index:++n});o.append(t[e],p())}}}else if(8===o.nodeType)if(o.data===l)h.push({type:2,index:n});else{let t=-1;for(;-1!==(t=o.data.indexOf(s,t+1));)h.push({type:7,index:n}),t+=s.length-1}n++}}static createElement(t,e){const i=c.createElement("template");return i.innerHTML=t,i}}function O(t,e,i=t,o){if(e===_)return e;let r=void 0!==o?i._$Co?.[o]:i._$Cl;const n=h(e)?void 0:e._$litDirective$;return r?.constructor!==n&&(r?._$AO?.(!1),void 0===n?r=void 0:(r=new n(t),r._$AT(t,i,o)),void 0!==o?(i._$Co??=[])[o]=r:i._$Cl=r),void 0!==r&&(e=O(t,r._$AS(t,e.values),r,o)),e}class N{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:i}=this._$AD,o=(t?.creationScope??c).importNode(e,!0);E.currentNode=o;let r=E.nextNode(),n=0,a=0,s=i[0];for(;void 0!==s;){if(n===s.index){let e;2===s.type?e=new R(r,r.nextSibling,this,t):1===s.type?e=new s.ctor(r,s.name,s.strings,this,t):6===s.type&&(e=new L(r,this,t)),this._$AV.push(e),s=i[++a]}n!==s?.index&&(r=E.nextNode(),n++)}return E.currentNode=c,o}p(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,o){this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=o,this._$Cv=o?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=O(this,t,e),h(t)?t===A||null==t||""===t?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==_&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>u(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==A&&h(this._$AH)?this._$AA.nextSibling.data=t:this.T(c.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:i}=t,o="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=C.createElement(k(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===o)this._$AH.p(e);else{const t=new N(o,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=T.get(t.strings);return void 0===e&&T.set(t.strings,e=new C(t)),e}k(t){u(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,o=0;for(const r of t)o===e.length?e.push(i=new R(this.O(p()),this.O(p()),this,this.options)):i=e[o],i._$AI(r),o++;o<e.length&&(this._$AR(i&&i._$AB.nextSibling,o),e.length=o)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class P{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,o,r){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=e,this._$AM=o,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=A}_$AI(t,e=this,i,o){const r=this.strings;let n=!1;if(void 0===r)t=O(this,t,e,0),n=!h(t)||t!==this._$AH&&t!==_,n&&(this._$AH=t);else{const o=t;let a,s;for(t=r[0],a=0;a<r.length-1;a++)s=O(this,o[i+a],e,a),s===_&&(s=this._$AH[a]),n||=!h(s)||s!==this._$AH[a],s===A?t=A:t!==A&&(t+=(s??"")+r[a+1]),this._$AH[a]=s}n&&!o&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class M extends P{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}class I extends P{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==A)}}class D extends P{constructor(t,e,i,o,r){super(t,e,i,o,r),this.type=5}_$AI(t,e=this){if((t=O(this,t,e,0)??A)===_)return;const i=this._$AH,o=t===A&&i!==A||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,r=t!==A&&(i===A||o);o&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class L{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){O(this,t)}}const U=o.litHtmlPolyfillSupport;U?.(C,R),(o.litHtmlVersions??=[]).push("3.3.1")},86663:(t,e,i)=>{"use strict";i.d(e,{Rf:()=>l,sk:()=>d});const o=globalThis,r=o.ShadowRoot&&(void 0===o.ShadyCSS||o.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,n=Symbol(),a=new WeakMap;class s{constructor(t,e,i){if(this._$cssResult$=!0,i!==n)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(r&&void 0===t){const i=void 0!==e&&1===e.length;i&&(t=a.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&a.set(e,t))}return t}toString(){return this.cssText}}const l=(t,e)=>{if(r)t.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const i of e){const e=document.createElement("style"),r=o.litNonce;void 0!==r&&e.setAttribute("nonce",r),e.textContent=i.cssText,t.appendChild(e)}},d=r?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>new s("string"==typeof t?t:t+"",void 0,n))(e)})(t):t},86718:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});var o=i(36758),r=i.n(o),n=i(40935),a=i.n(n)()(r());a.push([t.id,".reader-content{flex:1}",""]);const s=a},93811:t=>{"use strict";t.exports=LitExternal},95665:t=>{"use strict";t.exports=LitDecoratorsExternal},97519:(t,e,i)=>{"use strict";i.d(e,{A:()=>it});const{entries:o,setPrototypeOf:r,isFrozen:n,getPrototypeOf:a,getOwnPropertyDescriptor:s}=Object;let{freeze:l,seal:d,create:c}=Object,{apply:p,construct:h}="undefined"!=typeof Reflect&&Reflect;l||(l=function(t){return t}),d||(d=function(t){return t}),p||(p=function(t,e,i){return t.apply(e,i)}),h||(h=function(t,e){return new t(...e)});const u=$(Array.prototype.forEach),g=$(Array.prototype.lastIndexOf),m=$(Array.prototype.pop),f=$(Array.prototype.push),b=$(Array.prototype.splice),y=$(String.prototype.toLowerCase),x=$(String.prototype.toString),v=$(String.prototype.match),w=$(String.prototype.replace),S=$(String.prototype.indexOf),_=$(String.prototype.trim),A=$(Object.prototype.hasOwnProperty),T=$(RegExp.prototype.test),E=(k=TypeError,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return h(k,e)});var k;function $(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];return p(t,e,o)}}function C(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;r&&r(t,null);let o=e.length;for(;o--;){let r=e[o];if("string"==typeof r){const t=i(r);t!==r&&(n(e)||(e[o]=t),r=t)}t[r]=!0}return t}function O(t){for(let e=0;e<t.length;e++)A(t,e)||(t[e]=null);return t}function N(t){const e=c(null);for(const[i,r]of o(t))A(t,i)&&(Array.isArray(r)?e[i]=O(r):r&&"object"==typeof r&&r.constructor===Object?e[i]=N(r):e[i]=r);return e}function R(t,e){for(;null!==t;){const i=s(t,e);if(i){if(i.get)return $(i.get);if("function"==typeof i.value)return $(i.value)}t=a(t)}return function(){return null}}const P=l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),M=l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),I=l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),D=l(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),L=l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),U=l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),z=l(["#text"]),H=l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),B=l(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),j=l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),W=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Y=d(/\{\{[\w\W]*|[\w\W]*\}\}/gm),F=d(/<%[\w\W]*|[\w\W]*%>/gm),G=d(/\$\{[\w\W]*/gm),q=d(/^data-[\-\w.\u00B7-\uFFFF]+$/),V=d(/^aria-[\-\w]+$/),X=d(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z=d(/^(?:\w+script|data):/i),K=d(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J=d(/^html$/i),Q=d(/^[a-z][.\w]*(-[.\w]+)+$/i);var tt=Object.freeze({__proto__:null,ARIA_ATTR:V,ATTR_WHITESPACE:K,CUSTOM_ELEMENT:Q,DATA_ATTR:q,DOCTYPE_NAME:J,ERB_EXPR:F,IS_ALLOWED_URI:X,IS_SCRIPT_OR_DATA:Z,MUSTACHE_EXPR:Y,TMPLIT_EXPR:G});const et=function(){return"undefined"==typeof window?null:window};var it=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();const i=e=>t(e);if(i.version="3.2.6",i.removed=[],!e||!e.document||9!==e.document.nodeType||!e.Element)return i.isSupported=!1,i;let{document:r}=e;const n=r,a=n.currentScript,{DocumentFragment:s,HTMLTemplateElement:d,Node:p,Element:h,NodeFilter:k,NamedNodeMap:$=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:O,DOMParser:Y,trustedTypes:F}=e,G=h.prototype,q=R(G,"cloneNode"),V=R(G,"remove"),Z=R(G,"nextSibling"),K=R(G,"childNodes"),Q=R(G,"parentNode");if("function"==typeof d){const t=r.createElement("template");t.content&&t.content.ownerDocument&&(r=t.content.ownerDocument)}let it,ot="";const{implementation:rt,createNodeIterator:nt,createDocumentFragment:at,getElementsByTagName:st}=r,{importNode:lt}=n;let dt={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};i.isSupported="function"==typeof o&&"function"==typeof Q&&rt&&void 0!==rt.createHTMLDocument;const{MUSTACHE_EXPR:ct,ERB_EXPR:pt,TMPLIT_EXPR:ht,DATA_ATTR:ut,ARIA_ATTR:gt,IS_SCRIPT_OR_DATA:mt,ATTR_WHITESPACE:ft,CUSTOM_ELEMENT:bt}=tt;let{IS_ALLOWED_URI:yt}=tt,xt=null;const vt=C({},[...P,...M,...I,...L,...z]);let wt=null;const St=C({},[...H,...B,...j,...W]);let _t=Object.seal(c(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),At=null,Tt=null,Et=!0,kt=!0,$t=!1,Ct=!0,Ot=!1,Nt=!0,Rt=!1,Pt=!1,Mt=!1,It=!1,Dt=!1,Lt=!1,Ut=!0,zt=!1,Ht=!0,Bt=!1,jt={},Wt=null;const Yt=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ft=null;const Gt=C({},["audio","video","img","source","image","track"]);let qt=null;const Vt=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xt="http://www.w3.org/1998/Math/MathML",Zt="http://www.w3.org/2000/svg",Kt="http://www.w3.org/1999/xhtml";let Jt=Kt,Qt=!1,te=null;const ee=C({},[Xt,Zt,Kt],x);let ie=C({},["mi","mo","mn","ms","mtext"]),oe=C({},["annotation-xml"]);const re=C({},["title","style","font","a","script"]);let ne=null;const ae=["application/xhtml+xml","text/html"];let se=null,le=null;const de=r.createElement("form"),ce=function(t){return t instanceof RegExp||t instanceof Function},pe=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!le||le!==t){if(t&&"object"==typeof t||(t={}),t=N(t),ne=-1===ae.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,se="application/xhtml+xml"===ne?x:y,xt=A(t,"ALLOWED_TAGS")?C({},t.ALLOWED_TAGS,se):vt,wt=A(t,"ALLOWED_ATTR")?C({},t.ALLOWED_ATTR,se):St,te=A(t,"ALLOWED_NAMESPACES")?C({},t.ALLOWED_NAMESPACES,x):ee,qt=A(t,"ADD_URI_SAFE_ATTR")?C(N(Vt),t.ADD_URI_SAFE_ATTR,se):Vt,Ft=A(t,"ADD_DATA_URI_TAGS")?C(N(Gt),t.ADD_DATA_URI_TAGS,se):Gt,Wt=A(t,"FORBID_CONTENTS")?C({},t.FORBID_CONTENTS,se):Yt,At=A(t,"FORBID_TAGS")?C({},t.FORBID_TAGS,se):N({}),Tt=A(t,"FORBID_ATTR")?C({},t.FORBID_ATTR,se):N({}),jt=!!A(t,"USE_PROFILES")&&t.USE_PROFILES,Et=!1!==t.ALLOW_ARIA_ATTR,kt=!1!==t.ALLOW_DATA_ATTR,$t=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Ct=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Ot=t.SAFE_FOR_TEMPLATES||!1,Nt=!1!==t.SAFE_FOR_XML,Rt=t.WHOLE_DOCUMENT||!1,It=t.RETURN_DOM||!1,Dt=t.RETURN_DOM_FRAGMENT||!1,Lt=t.RETURN_TRUSTED_TYPE||!1,Mt=t.FORCE_BODY||!1,Ut=!1!==t.SANITIZE_DOM,zt=t.SANITIZE_NAMED_PROPS||!1,Ht=!1!==t.KEEP_CONTENT,Bt=t.IN_PLACE||!1,yt=t.ALLOWED_URI_REGEXP||X,Jt=t.NAMESPACE||Kt,ie=t.MATHML_TEXT_INTEGRATION_POINTS||ie,oe=t.HTML_INTEGRATION_POINTS||oe,_t=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&ce(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(_t.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ce(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(_t.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(_t.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ot&&(kt=!1),Dt&&(It=!0),jt&&(xt=C({},z),wt=[],!0===jt.html&&(C(xt,P),C(wt,H)),!0===jt.svg&&(C(xt,M),C(wt,B),C(wt,W)),!0===jt.svgFilters&&(C(xt,I),C(wt,B),C(wt,W)),!0===jt.mathMl&&(C(xt,L),C(wt,j),C(wt,W))),t.ADD_TAGS&&(xt===vt&&(xt=N(xt)),C(xt,t.ADD_TAGS,se)),t.ADD_ATTR&&(wt===St&&(wt=N(wt)),C(wt,t.ADD_ATTR,se)),t.ADD_URI_SAFE_ATTR&&C(qt,t.ADD_URI_SAFE_ATTR,se),t.FORBID_CONTENTS&&(Wt===Yt&&(Wt=N(Wt)),C(Wt,t.FORBID_CONTENTS,se)),Ht&&(xt["#text"]=!0),Rt&&C(xt,["html","head","body"]),xt.table&&(C(xt,["tbody"]),delete At.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw E('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw E('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');it=t.TRUSTED_TYPES_POLICY,ot=it.createHTML("")}else void 0===it&&(it=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let i=null;const o="data-tt-policy-suffix";e&&e.hasAttribute(o)&&(i=e.getAttribute(o));const r="dompurify"+(i?"#"+i:"");try{return t.createPolicy(r,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(F,a)),null!==it&&"string"==typeof ot&&(ot=it.createHTML(""));l&&l(t),le=t}},he=C({},[...M,...I,...D]),ue=C({},[...L,...U]),ge=function(t){f(i.removed,{element:t});try{Q(t).removeChild(t)}catch(e){V(t)}},me=function(t,e){try{f(i.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){f(i.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(It||Dt)try{ge(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},fe=function(t){let e=null,i=null;if(Mt)t="<remove></remove>"+t;else{const e=v(t,/^[\r\n\t ]+/);i=e&&e[0]}"application/xhtml+xml"===ne&&Jt===Kt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const o=it?it.createHTML(t):t;if(Jt===Kt)try{e=(new Y).parseFromString(o,ne)}catch(t){}if(!e||!e.documentElement){e=rt.createDocument(Jt,"template",null);try{e.documentElement.innerHTML=Qt?ot:o}catch(t){}}const n=e.body||e.documentElement;return t&&i&&n.insertBefore(r.createTextNode(i),n.childNodes[0]||null),Jt===Kt?st.call(e,Rt?"html":"body")[0]:Rt?e.documentElement:n},be=function(t){return nt.call(t.ownerDocument||t,t,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT|k.SHOW_PROCESSING_INSTRUCTION|k.SHOW_CDATA_SECTION,null)},ye=function(t){return t instanceof O&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof $)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},xe=function(t){return"function"==typeof p&&t instanceof p};function ve(t,e,o){u(t,t=>{t.call(i,e,o,le)})}const we=function(t){let e=null;if(ve(dt.beforeSanitizeElements,t,null),ye(t))return ge(t),!0;const o=se(t.nodeName);if(ve(dt.uponSanitizeElement,t,{tagName:o,allowedTags:xt}),Nt&&t.hasChildNodes()&&!xe(t.firstElementChild)&&T(/<[/\w!]/g,t.innerHTML)&&T(/<[/\w!]/g,t.textContent))return ge(t),!0;if(7===t.nodeType)return ge(t),!0;if(Nt&&8===t.nodeType&&T(/<[/\w]/g,t.data))return ge(t),!0;if(!xt[o]||At[o]){if(!At[o]&&_e(o)){if(_t.tagNameCheck instanceof RegExp&&T(_t.tagNameCheck,o))return!1;if(_t.tagNameCheck instanceof Function&&_t.tagNameCheck(o))return!1}if(Ht&&!Wt[o]){const e=Q(t)||t.parentNode,i=K(t)||t.childNodes;if(i&&e)for(let o=i.length-1;o>=0;--o){const r=q(i[o],!0);r.__removalCount=(t.__removalCount||0)+1,e.insertBefore(r,Z(t))}}return ge(t),!0}return t instanceof h&&!function(t){let e=Q(t);e&&e.tagName||(e={namespaceURI:Jt,tagName:"template"});const i=y(t.tagName),o=y(e.tagName);return!!te[t.namespaceURI]&&(t.namespaceURI===Zt?e.namespaceURI===Kt?"svg"===i:e.namespaceURI===Xt?"svg"===i&&("annotation-xml"===o||ie[o]):Boolean(he[i]):t.namespaceURI===Xt?e.namespaceURI===Kt?"math"===i:e.namespaceURI===Zt?"math"===i&&oe[o]:Boolean(ue[i]):t.namespaceURI===Kt?!(e.namespaceURI===Zt&&!oe[o])&&!(e.namespaceURI===Xt&&!ie[o])&&!ue[i]&&(re[i]||!he[i]):!("application/xhtml+xml"!==ne||!te[t.namespaceURI]))}(t)?(ge(t),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!T(/<\/no(script|embed|frames)/i,t.innerHTML)?(Ot&&3===t.nodeType&&(e=t.textContent,u([ct,pt,ht],t=>{e=w(e,t," ")}),t.textContent!==e&&(f(i.removed,{element:t.cloneNode()}),t.textContent=e)),ve(dt.afterSanitizeElements,t,null),!1):(ge(t),!0)},Se=function(t,e,i){if(Ut&&("id"===e||"name"===e)&&(i in r||i in de))return!1;if(kt&&!Tt[e]&&T(ut,e));else if(Et&&T(gt,e));else if(!wt[e]||Tt[e]){if(!(_e(t)&&(_t.tagNameCheck instanceof RegExp&&T(_t.tagNameCheck,t)||_t.tagNameCheck instanceof Function&&_t.tagNameCheck(t))&&(_t.attributeNameCheck instanceof RegExp&&T(_t.attributeNameCheck,e)||_t.attributeNameCheck instanceof Function&&_t.attributeNameCheck(e))||"is"===e&&_t.allowCustomizedBuiltInElements&&(_t.tagNameCheck instanceof RegExp&&T(_t.tagNameCheck,i)||_t.tagNameCheck instanceof Function&&_t.tagNameCheck(i))))return!1}else if(qt[e]);else if(T(yt,w(i,ft,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==S(i,"data:")||!Ft[t])if($t&&!T(mt,w(i,ft,"")));else if(i)return!1;return!0},_e=function(t){return"annotation-xml"!==t&&v(t,bt)},Ae=function(t){ve(dt.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||ye(t))return;const o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:wt,forceKeepAttr:void 0};let r=e.length;for(;r--;){const n=e[r],{name:a,namespaceURI:s,value:l}=n,d=se(a),c=l;let p="value"===a?c:_(c);if(o.attrName=d,o.attrValue=p,o.keepAttr=!0,o.forceKeepAttr=void 0,ve(dt.uponSanitizeAttribute,t,o),p=o.attrValue,!zt||"id"!==d&&"name"!==d||(me(a,t),p="user-content-"+p),Nt&&T(/((--!?|])>)|<\/(style|title)/i,p)){me(a,t);continue}if(o.forceKeepAttr)continue;if(!o.keepAttr){me(a,t);continue}if(!Ct&&T(/\/>/i,p)){me(a,t);continue}Ot&&u([ct,pt,ht],t=>{p=w(p,t," ")});const h=se(t.nodeName);if(Se(h,d,p)){if(it&&"object"==typeof F&&"function"==typeof F.getAttributeType)if(s);else switch(F.getAttributeType(h,d)){case"TrustedHTML":p=it.createHTML(p);break;case"TrustedScriptURL":p=it.createScriptURL(p)}if(p!==c)try{s?t.setAttributeNS(s,a,p):t.setAttribute(a,p),ye(t)?ge(t):m(i.removed)}catch(e){me(a,t)}}else me(a,t)}ve(dt.afterSanitizeAttributes,t,null)},Te=function t(e){let i=null;const o=be(e);for(ve(dt.beforeSanitizeShadowDOM,e,null);i=o.nextNode();)ve(dt.uponSanitizeShadowNode,i,null),we(i),Ae(i),i.content instanceof s&&t(i.content);ve(dt.afterSanitizeShadowDOM,e,null)};return i.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null,r=null,a=null,l=null;if(Qt=!t,Qt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!xe(t)){if("function"!=typeof t.toString)throw E("toString is not a function");if("string"!=typeof(t=t.toString()))throw E("dirty is not a string, aborting")}if(!i.isSupported)return t;if(Pt||pe(e),i.removed=[],"string"==typeof t&&(Bt=!1),Bt){if(t.nodeName){const e=se(t.nodeName);if(!xt[e]||At[e])throw E("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof p)o=fe("\x3c!----\x3e"),r=o.ownerDocument.importNode(t,!0),1===r.nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?o=r:o.appendChild(r);else{if(!It&&!Ot&&!Rt&&-1===t.indexOf("<"))return it&&Lt?it.createHTML(t):t;if(o=fe(t),!o)return It?null:Lt?ot:""}o&&Mt&&ge(o.firstChild);const d=be(Bt?t:o);for(;a=d.nextNode();)we(a),Ae(a),a.content instanceof s&&Te(a.content);if(Bt)return t;if(It){if(Dt)for(l=at.call(o.ownerDocument);o.firstChild;)l.appendChild(o.firstChild);else l=o;return(wt.shadowroot||wt.shadowrootmode)&&(l=lt.call(n,l,!0)),l}let c=Rt?o.outerHTML:o.innerHTML;return Rt&&xt["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&T(J,o.ownerDocument.doctype.name)&&(c="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+c),Ot&&u([ct,pt,ht],t=>{c=w(c,t," ")}),it&&Lt?it.createHTML(c):c},i.setConfig=function(){pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Pt=!0},i.clearConfig=function(){le=null,Pt=!1},i.isValidAttribute=function(t,e,i){le||pe({});const o=se(t),r=se(e);return Se(o,r,i)},i.addHook=function(t,e){"function"==typeof e&&f(dt[t],e)},i.removeHook=function(t,e){if(void 0!==e){const i=g(dt[t],e);return-1===i?void 0:b(dt[t],i,1)[0]}return m(dt[t])},i.removeHooks=function(t){dt[t]=[]},i.removeAllHooks=function(){dt={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},i}()}},e={};function i(o){var r=e[o];if(void 0!==r)return r.exports;var n=e[o]={id:o,exports:{}};return t[o](n,n.exports,i),n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=i(38085),e=i(93811),o=i(95665),r=i(30827),n=i(32267),a=i(15606),s=i.n(a),l=(i(67810),i(21634),function(t,e,i,o){var r,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}),d=function(t,e,i,o){return new(i||(i=Promise))(function(r,n){function a(t){try{l(o.next(t))}catch(t){n(t)}}function s(t){try{l(o.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}l((o=o.apply(t,e||[])).next())})};t.SHARED_COMPONENTS.Reader;const c="reader-controls";(new CSSStyleSheet).replaceSync(s());class p extends r.y{constructor(){super(...arguments),this.sidebarOptions=t.fallbackChromeSettings.sidebarOptions}createRenderRoot(){return this}firstUpdated(e){var i,o,r;this.initStyles(),this.initListener(),(0,t.createMarkerIfNotExists)(),(0,t.createPopupToolbox)(),(0,t.createSidebar)({isBlacklisted:!1,isDefaultOpen:!(0,t.isMobile)()&&!(0,t.isSpecificWebsiteToolReader)(t.WEBSITE_TOOLS.OPEN_WEBSITE_IN_READER_MODE)&&(null===(o=null===(i=(0,t.useContextWithCatch)())||void 0===i?void 0:i.appConfig)||void 0===o?void 0:o.appType)!==t.AppType.reader}),null===(r=this.readerControls)||void 0===r||r.focus()}disconnectedCallback(){window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",this.initStyles.bind(this)),(0,t.removeMarker)(),(0,t.removePopupToolbox)(),(0,t.removeSidebar)(),(0,t.toggleDocumentBodyForSidebar)({open:!1}),super.disconnectedCallback()}initListener(){this.subscriptions=[t.notifications.subscribe("updatedChromeSettings",this.initStyles.bind(this))],window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",this.initStyles.bind(this))}onReaderContentReady(){return d(this,void 0,void 0,function*(){t.notifications.dispatch("readerUpdating",{detail:{}}),(0,t.initMarker)().finally(()=>{t.notifications.dispatch("readerReady",{detail:{}}),((0,t.isSpecificWebsiteToolReader)(t.WEBSITE_TOOLS.YOUTUBE_AI_SUMMARY)||(0,t.isSpecificWebsiteToolReader)(t.WEBSITE_TOOLS.WEBSITE_AI_SUMMARY))&&this.generateAiSummary()})})}generateAiSummary(){return d(this,void 0,void 0,function*(){let e=yield(0,t.loadBookmarkForCurrentPage)();e||(e=yield(0,t.createNewBookmark)()),yield(0,t.generateAiSummaryForBookmark)({bookmark:e,summarizerConfig:{config:t.DEFAULT_AI_SUMMARY},onUpdate:()=>{}})})}initStyles(){return d(this,void 0,void 0,function*(){yield(0,t.setReaderStyles)(),this.sidebarOptions=(yield(0,t.useContext)().db.getChromeSettings()).sidebarOptions})}onUpdatedStyles(){return d(this,void 0,void 0,function*(){yield(0,t.setReaderStyles)()})}onUpdatedColorMode(e){return d(this,void 0,void 0,function*(){yield(0,t.highlightMarks)()})}render(){return e.html`
      <style>
        ${s()}
      </style>
      ${n.e}

      <div class="reader-content">
        <webhighlights-reader-content
          @ready=${this.onReaderContentReady}
        ></webhighlights-reader-content>
      </div>
      <webhighlights-reader-controls
        tabindex="0"
        id=${c}
        class="${"left"===this.sidebarOptions.sidebarAlignment?"right":"left"}"
        @updatedStyles=${this.onUpdatedStyles}
        @updatedColorMode=${this.onUpdatedColorMode}
      ></webhighlights-reader-controls>
    `}}l([(0,o.state)()],p.prototype,"sidebarOptions",void 0),l([(0,o.query)(`#${c}`)],p.prototype,"readerControls",void 0),r.y.define("webhighlights-reader",p)})()})();